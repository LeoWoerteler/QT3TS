<html>
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
      <title>Test results covering change: Array Curly Constructor</title><script language="JavaScript" type="text/javascript">
         function doMenu(item) {
         obj=document.getElementById(item);
         col=document.getElementById("x" + item);
         if (obj.style.display=="none") { obj.style.display="block"; col.innerHTML="[-]"; }
         else { obj.style.display="none"; col.innerHTML="[+]"; } }
      </script><script language="JavaScript" type="text/javascript">
          (document.getElementById) ? domNode = true: domNode = false;
          var current = null;
          
          function makeVisible(item) {
               if(current != null) {
                  makeInvisible(current);
              }
              if (domNode) {
                  document.getElementById(item).style.visibility = 'visible';
                  current = item;
                  
              }
          }
          
          function makeInvisible(item) {
              if (domNode) {
                  document.getElementById(item).style.visibility = 'hidden';
                  current = item;
              }
          }
      </script></head>
   <body>
      <p><button type="button" onclick="window.location='../report.html'">Main
            Report</button>&nbsp;&nbsp;<button type="button" onclick="window.location='javascript:javascript:history.go(-1)'">Back</button></p>
      <h1>Test results covering change: <i>Array Curly Constructor</i></h1>
      <p><b>Change id: array-curly-constructor</b></p>
      <table frame="hsides" rules="groups" border="1" bordercolor="black" bgcolor="lightcyan" cellpadding="2">
         <thead>
            <tr>
               <td></td>
               <td colspan="7" style="text-align:center"><b>Implementations</b></td>
            </tr>
            <tr>
               <th>Tests</th>
               <th valign="top"><a href="../results_BaseX_8.5 beta_d3.html">BaseX 8.5 beta</a><br>XQ31<br><font size="-1">(QT3 vCVS)</font></th>
               <th valign="top"><a href="../results_Saxon-EE_9.7.0.8_d4.html">Saxon-EE 9.7.0.8</a><br>XP31
               </th>
               <th valign="top"><a href="../results_Saxon-EE_9.7.0.8_d6.html">Saxon-EE 9.7.0.8</a><br>XQ31
               </th>
               <th valign="top"><a href="../results_XmlPrime_4.0.0.0_d5.html">XmlPrime 4.0.0.0</a><br>XP31<br><font size="-1">(QT3 vCVS)</font></th>
               <th valign="top"><a href="../results_XmlPrime_4.0.0.0_d7.html">XmlPrime 4.0.0.0</a><br>XQ31<br><font size="-1">(QT3 vCVS)</font></th>
               <th valign="top"><a href="../results_XmlPrime_4.0.0.0_d8.html">XmlPrime 4.0.0.0</a><br>XQX31<br><font size="-1">(QT3 vCVS)</font></th>
               <th valign="top"><a href="../results_anonymous_r3721380_d2.html">anonymous r3721380</a><br>XQ31<br><font size="-1">(QT3 vCVS)</font></th>
            </tr>
         </thead>
         <tbody>
            <tr>
               <td valign="top">&nbsp;&nbsp;&nbsp;&nbsp;<a name="#xboolean-013">boolean-013</a><a href="#xboolean-013" onmousedown="makeVisible('boolean-013');" onmouseover="makeVisible('boolean-013');" id="xboolean-013">[+]</a><font size="-1">
                     <div id="boolean-013" style="position:absolute; left:20; width:410px; visibility:hidden"><font face="verdana, arial, helvetica, sans-serif" size="2">
                           <div style="float:left; background-color:white; padding:3px; border:1px solid black"><span style="float:right; background-color:gray; color:white; font-weight:bold; width='20px'; text-align:center; cursor:pointer" onclick="makeInvisible('boolean-013')">&nbsp;X&nbsp;</span><b>boolean-013:</b><br><br><b>Spec Dependencies</b>:<br>spec = XP31+ XQ31+<br><br><b>Test</b>: boolean(array{})
                           </div></font></div></font></td>
               <td valign="top" bgcolor="palegreen">pass</td>
               <td valign="top" bgcolor="palegreen">pass</td>
               <td valign="top" bgcolor="palegreen">pass</td>
               <td valign="top" bgcolor="palegreen">pass</td>
               <td valign="top" bgcolor="palegreen">pass</td>
               <td valign="top" bgcolor="palegreen">pass</td>
               <td valign="top" bgcolor="palegreen">pass</td>
            </tr>
            <tr>
               <td valign="top">&nbsp;&nbsp;&nbsp;&nbsp;<a name="#xUseCaseJSON-010">UseCaseJSON-010</a><a href="#xUseCaseJSON-010" onmousedown="makeVisible('UseCaseJSON-010');" onmouseover="makeVisible('UseCaseJSON-010');" id="xUseCaseJSON-010">[+]</a><font size="-1">
                     <div id="UseCaseJSON-010" style="position:absolute; left:20; width:410px; visibility:hidden"><font face="verdana, arial, helvetica, sans-serif" size="2">
                           <div style="float:left; background-color:white; padding:3px; border:1px solid black"><span style="float:right; background-color:gray; color:white; font-weight:bold; width='20px'; text-align:center; cursor:pointer" onclick="makeInvisible('UseCaseJSON-010')">&nbsp;X&nbsp;</span><b>UseCaseJSON-010:</b><br><br><b>Spec Dependencies</b>:<br>spec = XQ31+<br>feature = higherOrderFunctions<br><br><b>Test</b>: 
                              &lt;html&gt;
                              				  &lt;body&gt;				
                              				    &lt;table&gt;
                              				      &lt;tr&gt; 
                              				         { (: Column headings :) 
                              				            &lt;th&gt; &lt;/th&gt;,
                              				            for $th in json-doc("table.json")("col labels")?*
                              				            return &lt;th&gt;{ $th }&lt;/th&gt;
                              				         }
                              				      &lt;/tr&gt;
                              				      {  (: Data for each row :)
                              				         for $r at $i in json-doc("table.json")("data")?*
                              				         return
                              				            &lt;tr&gt;
                              				             {
                              				               &lt;th&gt;{ json-doc("table.json")("row labels")[$i] }&lt;/th&gt;,
                              				               for $c in $r?*
                              				               return &lt;td&gt;{ $c }&lt;/td&gt;
                              				             }
                              				            &lt;/tr&gt;
                              				      }
                              				    &lt;/table&gt;				
                              				  &lt;/body&gt;
                              				&lt;/html&gt;   
                              		  
                           </div></font></div></font></td>
               <td valign="top" bgcolor="palegreen">pass</td>
               <td valign="top" bgcolor="white">n/a
                  <div align="left" width="20"><font size="1">
                        <p>notXP31</p></font></div>
               </td>
               <td valign="top" bgcolor="palegreen">pass</td>
               <td valign="top" bgcolor="white">n/a</td>
               <td valign="top" bgcolor="palegreen">pass</td>
               <td valign="top" bgcolor="palegreen">pass</td>
               <td valign="top" bgcolor="palegreen">pass</td>
            </tr>
            <tr>
               <td valign="top">&nbsp;&nbsp;&nbsp;&nbsp;<a name="#xUseCaseJSON-012">UseCaseJSON-012</a><a href="#xUseCaseJSON-012" onmousedown="makeVisible('UseCaseJSON-012');" onmouseover="makeVisible('UseCaseJSON-012');" id="xUseCaseJSON-012">[+]</a><font size="-1">
                     <div id="UseCaseJSON-012" style="position:absolute; left:20; width:410px; visibility:hidden"><font face="verdana, arial, helvetica, sans-serif" size="2">
                           <div style="float:left; background-color:white; padding:3px; border:1px solid black"><span style="float:right; background-color:gray; color:white; font-weight:bold; width='20px'; text-align:center; cursor:pointer" onclick="makeInvisible('UseCaseJSON-012')">&nbsp;X&nbsp;</span><b>UseCaseJSON-012:</b><br><br><b>Spec Dependencies</b>:<br>spec = XQ31+<br>feature = higherOrderFunctions<br><br><b>Test</b>: 
                              let $users := [map { "userid" : "W0342", "firstname" : "Walter", "lastname" : "Denisovich"
                              }, map { "userid" : "M0535", "firstname" : "Mick", "lastname" : "Goulish" }]?* 
                              let $holdings := [map { "userid" : "W0342", "ticker" : "DIS", "shares" : 153212312
                              }, map { "userid" : "M0535", "ticker" : "DIS", "shares" : 10 }, map { "userid" : "M0535",
                              "ticker" : "AIG", "shares" : 23412 }]?*   
                              return array {
                              for $u in $users
                              order by $u("userid")
                              return map { "userid" : $u("userid"), 
                              "first" :  $u("firstname"), 
                              "last" :   $u("lastname"), 
                              "holdings" : array {
                              for $h in $holdings
                              where $h("userid") = $u("userid")
                              order by $h("ticker")
                              									        return map { "ticker" : $h("ticker"), "share" : $h("shares") }
                              										    }
                              }
                              }       
                              		  
                           </div></font></div></font></td>
               <td valign="top" bgcolor="palegreen">pass</td>
               <td valign="top" bgcolor="white">n/a
                  <div align="left" width="20"><font size="1">
                        <p>notXP31</p></font></div>
               </td>
               <td valign="top" bgcolor="palegreen">pass</td>
               <td valign="top" bgcolor="white">n/a</td>
               <td valign="top" bgcolor="palegreen">pass</td>
               <td valign="top" bgcolor="palegreen">pass</td>
               <td valign="top" bgcolor="palegreen">pass</td>
            </tr>
            <tr>
               <td valign="top">&nbsp;&nbsp;&nbsp;&nbsp;<a name="#xUseCaseNLP-006b">UseCaseNLP-006b</a><a href="#xUseCaseNLP-006b" onmousedown="makeVisible('UseCaseNLP-006b');" onmouseover="makeVisible('UseCaseNLP-006b');" id="xUseCaseNLP-006b">[+]</a><font size="-1">
                     <div id="UseCaseNLP-006b" style="position:absolute; left:20; width:410px; visibility:hidden"><font face="verdana, arial, helvetica, sans-serif" size="2">
                           <div style="float:left; background-color:white; padding:3px; border:1px solid black"><span style="float:right; background-color:gray; color:white; font-weight:bold; width='20px'; text-align:center; cursor:pointer" onclick="makeInvisible('UseCaseNLP-006b')">&nbsp;X&nbsp;</span><b>UseCaseNLP-006b:</b><br><br><b>Spec Dependencies</b>:<br>spec = XQ31+<br>feature = higherOrderFunctions<br><br><b>Test</b>: 
                              
                              declare function local:filter($s as item()*, $p as function(item()) as xs:boolean)
                              {
                              map {
                              true() : array { $s[$p(.)] },   
                              false() : array { $s[not($p(.))] }
                              }
                              };					
                              let $f := function($a) { starts-with($a(2), "VB") }
                              return
                              local:filter(json-doc('speech-representation.json')?*, $f)
                              			  
                              			
                           </div></font></div></font></td>
               <td valign="top" bgcolor="palegreen">pass</td>
               <td valign="top" bgcolor="white">n/a
                  <div align="left" width="20"><font size="1">
                        <p>notXP31</p></font></div>
               </td>
               <td valign="top" bgcolor="palegreen">pass</td>
               <td valign="top" bgcolor="white">n/a</td>
               <td valign="top" bgcolor="palegreen">pass</td>
               <td valign="top" bgcolor="palegreen">pass</td>
               <td valign="top" bgcolor="palegreen">pass</td>
            </tr>
            <tr>
               <td valign="top">&nbsp;&nbsp;&nbsp;&nbsp;<a name="#xUseCaseR31-016">UseCaseR31-016</a><a href="#xUseCaseR31-016" onmousedown="makeVisible('UseCaseR31-016');" onmouseover="makeVisible('UseCaseR31-016');" id="xUseCaseR31-016">[+]</a><font size="-1">
                     <div id="UseCaseR31-016" style="position:absolute; left:20; width:410px; visibility:hidden"><font face="verdana, arial, helvetica, sans-serif" size="2">
                           <div style="float:left; background-color:white; padding:3px; border:1px solid black"><span style="float:right; background-color:gray; color:white; font-weight:bold; width='20px'; text-align:center; cursor:pointer" onclick="makeInvisible('UseCaseR31-016')">&nbsp;X&nbsp;</span><b>UseCaseR31-016:</b><br><br><b>Spec Dependencies</b>:<br>feature = higherOrderFunctions<br>spec = XQ31+<br>spec = XQ30+<br><br><b>Test</b>: 
                              declare variable $s :=[['A', 'DT'], ['bride', 'NN'], [',', ','], ['you', 'PRP'], ['know',
                              'VBP'], [',', ','], ['must', 'MD'],
                              ['appear', 'VB'], ['like', 'IN'], ['a', 'DT'], ['bride', 'NN'], [',', ','], ['but',
                              'CC'], ['my', 'PRP$'],
                              ['natural', 'JJ'], ['taste', 'NN'], ['is', 'VBZ'], ['all', 'DT'], ['for', 'IN'], ['simplicity',
                              'NN'], [';', ':'],
                              ['a', 'DT'], ['simple', 'JJ'], ['style', 'NN'], ['of', 'IN'], ['dress', 'NN'], ['is',
                              'VBZ'],
                              ['so', 'RB'], ['infinitely', 'RB'], ['preferable', 'JJ'], ['to', 'TO'], ['finery',
                              'VB'], ['.', '.']
                              ];
                              declare function local:words-only($s)
                              {
                              for $w in $s
                              where not($w(2) = (".", ",", ";", ":"))
                              return $w(1)
                              };
                              
                              for sliding window $w in local:words-only($s?*)
                              start at $i when true()
                              only end at $j when $j - $i eq 2
                              return
                              array { $w }
                           </div></font></div></font></td>
               <td valign="top" bgcolor="palegreen">pass</td>
               <td valign="top" bgcolor="white">n/a
                  <div align="left" width="20"><font size="1">
                        <p>test-set dependencies not satisfied</p></font></div>
               </td>
               <td valign="top" bgcolor="palegreen">pass</td>
               <td valign="top" bgcolor="white">n/a</td>
               <td valign="top" bgcolor="palegreen">pass</td>
               <td valign="top" bgcolor="palegreen">pass</td>
               <td valign="top" bgcolor="palegreen">pass</td>
            </tr>
            <tr>
               <td valign="top">&nbsp;&nbsp;&nbsp;&nbsp;<a name="#xUseCaseR31-017">UseCaseR31-017</a><a href="#xUseCaseR31-017" onmousedown="makeVisible('UseCaseR31-017');" onmouseover="makeVisible('UseCaseR31-017');" id="xUseCaseR31-017">[+]</a><font size="-1">
                     <div id="UseCaseR31-017" style="position:absolute; left:20; width:410px; visibility:hidden"><font face="verdana, arial, helvetica, sans-serif" size="2">
                           <div style="float:left; background-color:white; padding:3px; border:1px solid black"><span style="float:right; background-color:gray; color:white; font-weight:bold; width='20px'; text-align:center; cursor:pointer" onclick="makeInvisible('UseCaseR31-017')">&nbsp;X&nbsp;</span><b>UseCaseR31-017:</b><br><br><b>Spec Dependencies</b>:<br>feature = higherOrderFunctions<br>spec = XQ31+<br>spec = XQ30+<br><br><b>Test</b>: 
                              declare variable $s :=[['A', 'DT'], ['bride', 'NN'], [',', ','], ['you', 'PRP'], ['know',
                              'VBP'], [',', ','], ['must', 'MD'],
                              ['appear', 'VB'], ['like', 'IN'], ['a', 'DT'], ['bride', 'NN'], [',', ','], ['but',
                              'CC'], ['my', 'PRP$'],
                              ['natural', 'JJ'], ['taste', 'NN'], ['is', 'VBZ'], ['all', 'DT'], ['for', 'IN'], ['simplicity',
                              'NN'], [';', ':'],
                              ['a', 'DT'], ['simple', 'JJ'], ['style', 'NN'], ['of', 'IN'], ['dress', 'NN'], ['is',
                              'VBZ'],
                              ['so', 'RB'], ['infinitely', 'RB'], ['preferable', 'JJ'], ['to', 'TO'], ['finery',
                              'VB'], ['.', '.']
                              ];
                              declare function local:filter($s as item()*, $p as function(item()) as xs:boolean)
                              {
                              array { $s[$p(.)] },   array { $s[not($p(.))] }
                              };
                              
                              let $f := function($a) { starts-with($a(2), "VB") }
                              return
                              local:filter($s?*, $f)
                           </div></font></div></font></td>
               <td valign="top" bgcolor="palegreen">pass</td>
               <td valign="top" bgcolor="white">n/a
                  <div align="left" width="20"><font size="1">
                        <p>test-set dependencies not satisfied</p></font></div>
               </td>
               <td valign="top" bgcolor="palegreen">pass</td>
               <td valign="top" bgcolor="white">n/a</td>
               <td valign="top" bgcolor="palegreen">pass</td>
               <td valign="top" bgcolor="palegreen">pass</td>
               <td valign="top" bgcolor="palegreen">pass</td>
            </tr>
            <tr>
               <td valign="top">&nbsp;&nbsp;&nbsp;&nbsp;<a name="#xUseCaseR31-018">UseCaseR31-018</a><a href="#xUseCaseR31-018" onmousedown="makeVisible('UseCaseR31-018');" onmouseover="makeVisible('UseCaseR31-018');" id="xUseCaseR31-018">[+]</a><font size="-1">
                     <div id="UseCaseR31-018" style="position:absolute; left:20; width:410px; visibility:hidden"><font face="verdana, arial, helvetica, sans-serif" size="2">
                           <div style="float:left; background-color:white; padding:3px; border:1px solid black"><span style="float:right; background-color:gray; color:white; font-weight:bold; width='20px'; text-align:center; cursor:pointer" onclick="makeInvisible('UseCaseR31-018')">&nbsp;X&nbsp;</span><b>UseCaseR31-018:</b><br><br><b>Spec Dependencies</b>:<br>feature = higherOrderFunctions<br>spec = XQ31+<br>spec = XQ30+<br><br><b>Test</b>: 
                              declare variable $s :=[['A', 'DT'], ['bride', 'NN'], [',', ','], ['you', 'PRP'], ['know',
                              'VBP'], [',', ','], ['must', 'MD'],
                              ['appear', 'VB'], ['like', 'IN'], ['a', 'DT'], ['bride', 'NN'], [',', ','], ['but',
                              'CC'], ['my', 'PRP$'],
                              ['natural', 'JJ'], ['taste', 'NN'], ['is', 'VBZ'], ['all', 'DT'], ['for', 'IN'], ['simplicity',
                              'NN'], [';', ':'],
                              ['a', 'DT'], ['simple', 'JJ'], ['style', 'NN'], ['of', 'IN'], ['dress', 'NN'], ['is',
                              'VBZ'],
                              ['so', 'RB'], ['infinitely', 'RB'], ['preferable', 'JJ'], ['to', 'TO'], ['finery',
                              'VB'], ['.', '.']
                              ];
                              declare function local:filter($s as item()*, $p as function(item()) as xs:boolean)
                              {
                              map {
                              true() : array { $s[$p(.)] },
                              false() : array { $s[not($p(.))] }
                              }
                              };
                              
                              
                              let $f := function($a) { starts-with($a(2), "VB") }
                              return
                              local:filter($s?*, $f)
                           </div></font></div></font></td>
               <td valign="top" bgcolor="palegreen">pass</td>
               <td valign="top" bgcolor="white">n/a
                  <div align="left" width="20"><font size="1">
                        <p>test-set dependencies not satisfied</p></font></div>
               </td>
               <td valign="top" bgcolor="palegreen">pass</td>
               <td valign="top" bgcolor="white">n/a</td>
               <td valign="top" bgcolor="palegreen">pass</td>
               <td valign="top" bgcolor="palegreen">pass</td>
               <td valign="top" bgcolor="palegreen">pass</td>
            </tr>
            <tr>
               <td valign="top">&nbsp;&nbsp;&nbsp;&nbsp;<a name="#xUseCaseR31-026">UseCaseR31-026</a><a href="#xUseCaseR31-026" onmousedown="makeVisible('UseCaseR31-026');" onmouseover="makeVisible('UseCaseR31-026');" id="xUseCaseR31-026">[+]</a><font size="-1">
                     <div id="UseCaseR31-026" style="position:absolute; left:20; width:410px; visibility:hidden"><font face="verdana, arial, helvetica, sans-serif" size="2">
                           <div style="float:left; background-color:white; padding:3px; border:1px solid black"><span style="float:right; background-color:gray; color:white; font-weight:bold; width='20px'; text-align:center; cursor:pointer" onclick="makeInvisible('UseCaseR31-026')">&nbsp;X&nbsp;</span><b>UseCaseR31-026:</b><br><br><b>Spec Dependencies</b>:<br>feature = higherOrderFunctions<br>spec = XQ31+<br>spec = XQ30+<br><br><b>Test</b>: 
                              for $sarah in collection($users-collection-uri),
                              $friend in collection($users-collection-uri)
                              where $sarah('name') = "Sarah"
                              and $friend('name') = $sarah('friends')?*
                              return $friend('name')
                              
                           </div></font></div></font></td>
               <td valign="top" bgcolor="tomato">fail</td>
               <td valign="top" bgcolor="white">n/a
                  <div align="left" width="20"><font size="1">
                        <p>test-set dependencies not satisfied</p></font></div>
               </td>
               <td valign="top" bgcolor="palegreen">pass</td>
               <td valign="top" bgcolor="white">n/a</td>
               <td valign="top" bgcolor="palegreen">pass</td>
               <td valign="top" bgcolor="palegreen">pass</td>
               <td valign="top" bgcolor="tomato">fail</td>
            </tr>
            <tr>
               <td valign="top">&nbsp;&nbsp;&nbsp;&nbsp;<a name="#xUseCaseR31-027">UseCaseR31-027</a><a href="#xUseCaseR31-027" onmousedown="makeVisible('UseCaseR31-027');" onmouseover="makeVisible('UseCaseR31-027');" id="xUseCaseR31-027">[+]</a><font size="-1">
                     <div id="UseCaseR31-027" style="position:absolute; left:20; width:410px; visibility:hidden"><font face="verdana, arial, helvetica, sans-serif" size="2">
                           <div style="float:left; background-color:white; padding:3px; border:1px solid black"><span style="float:right; background-color:gray; color:white; font-weight:bold; width='20px'; text-align:center; cursor:pointer" onclick="makeInvisible('UseCaseR31-027')">&nbsp;X&nbsp;</span><b>UseCaseR31-027:</b><br><br><b>Spec Dependencies</b>:<br>feature = higherOrderFunctions<br>spec = XQ31+<br>spec = XQ30+<br><br><b>Test</b>: 
                              Q{http://www.w3.org/2005/xpath-functions/map}merge(
                              for $sales in collection($sales-collection-uri)
                              let $pname := $sales('product')
                              group by $pname
                              return map { $pname : sum(for $s in $sales return $s('quantity')) })
                           </div></font></div></font></td>
               <td valign="top" bgcolor="tomato">fail</td>
               <td valign="top" bgcolor="white">n/a
                  <div align="left" width="20"><font size="1">
                        <p>test-set dependencies not satisfied</p></font></div>
               </td>
               <td valign="top" bgcolor="tomato">fail
                  <div align="left" width="20"><font size="1">
                        <p>Expected success, got XPST0003</p></font></div>
               </td>
               <td valign="top" bgcolor="white">n/a</td>
               <td valign="top" bgcolor="palegreen">pass</td>
               <td valign="top" bgcolor="palegreen">pass</td>
               <td valign="top" bgcolor="tomato">fail</td>
            </tr>
            <tr>
               <td valign="top">&nbsp;&nbsp;&nbsp;&nbsp;<a name="#xUseCaseR31-028">UseCaseR31-028</a><a href="#xUseCaseR31-028" onmousedown="makeVisible('UseCaseR31-028');" onmouseover="makeVisible('UseCaseR31-028');" id="xUseCaseR31-028">[+]</a><font size="-1">
                     <div id="UseCaseR31-028" style="position:absolute; left:20; width:410px; visibility:hidden"><font face="verdana, arial, helvetica, sans-serif" size="2">
                           <div style="float:left; background-color:white; padding:3px; border:1px solid black"><span style="float:right; background-color:gray; color:white; font-weight:bold; width='20px'; text-align:center; cursor:pointer" onclick="makeInvisible('UseCaseR31-028')">&nbsp;X&nbsp;</span><b>UseCaseR31-028:</b><br><br><b>Spec Dependencies</b>:<br>spec = XQ31+<br>spec = XQ30+<br><br><b>Test</b>: 
                              declare namespace map="http://www.w3.org/2005/xpath-functions/map";
                              declare variable $storesVar := array { unparsed-text-lines("UseCaseR31/stores.json")
                              ! parse-json(.) };
                              declare variable $productsVar := array { unparsed-text-lines("UseCaseR31/products.json")
                              ! parse-json(.) };
                              declare variable $salesVar := array { unparsed-text-lines("UseCaseR31/sales.json")
                              ! parse-json(.) };
                              array {
                              for $store in $storesVar ? *
                              let $state := $store?state
                              group by $state
                              order by $state
                              return
                              map {
                              $state :  array {
                              for $product in $productsVar ? *
                              let $category := $product?category
                              group by $category
                              order by $category
                              return
                              map {
                              $category :  map:merge((
                              for $sales in $salesVar ? *
                              where $sales?("store number") = $store?("store number") and $sales?product = $product?name
                              let $pname := $sales?product
                              group by $pname
                              return map { $pname :  sum(for $s in $sales return $s?quantity)}
                              ))
                              }
                              }
                              }
                              }
                           </div></font></div></font></td>
               <td valign="top" bgcolor="palegreen">pass</td>
               <td valign="top" bgcolor="white">n/a
                  <div align="left" width="20"><font size="1">
                        <p>test-set dependencies not satisfied</p></font></div>
               </td>
               <td valign="top" bgcolor="palegreen">pass</td>
               <td valign="top" bgcolor="white">n/a</td>
               <td valign="top" bgcolor="palegreen">pass</td>
               <td valign="top" bgcolor="palegreen">pass</td>
               <td valign="top" bgcolor="tomato">fail</td>
            </tr>
            <tr>
               <td valign="top">&nbsp;&nbsp;&nbsp;&nbsp;<a name="#xUseCaseR31-029">UseCaseR31-029</a><a href="#xUseCaseR31-029" onmousedown="makeVisible('UseCaseR31-029');" onmouseover="makeVisible('UseCaseR31-029');" id="xUseCaseR31-029">[+]</a><font size="-1">
                     <div id="UseCaseR31-029" style="position:absolute; left:20; width:410px; visibility:hidden"><font face="verdana, arial, helvetica, sans-serif" size="2">
                           <div style="float:left; background-color:white; padding:3px; border:1px solid black"><span style="float:right; background-color:gray; color:white; font-weight:bold; width='20px'; text-align:center; cursor:pointer" onclick="makeInvisible('UseCaseR31-029')">&nbsp;X&nbsp;</span><b>UseCaseR31-029:</b><br><br><b>Spec Dependencies</b>:<br>feature = higherOrderFunctions<br>spec = XQ31+<br>spec = XQ30+<br><br><b>Test</b>: declare namespace map="http://www.w3.org/2005/xpath-functions/map";
                              let $sats := json-doc("http://www.w3.org/qt3/app/UseCaseR31/satellites-json")("satellites")
                              return map {
                              "visible" : array {
                              map:keys($sats)[$sats(.)("visible")]
                              },
                              "invisible" : array {
                              map:keys($sats)[not($sats(.)("visible"))]
                              }
                              }
                           </div></font></div></font></td>
               <td valign="top" bgcolor="palegreen">pass</td>
               <td valign="top" bgcolor="white">n/a
                  <div align="left" width="20"><font size="1">
                        <p>test-set dependencies not satisfied</p></font></div>
               </td>
               <td valign="top" bgcolor="palegreen">pass</td>
               <td valign="top" bgcolor="white">n/a</td>
               <td valign="top" bgcolor="palegreen">pass</td>
               <td valign="top" bgcolor="palegreen">pass</td>
               <td valign="top" bgcolor="palegreen">pass</td>
            </tr>
            <tr>
               <td valign="top">&nbsp;&nbsp;&nbsp;&nbsp;<a name="#xUseCaseR31-030">UseCaseR31-030</a><a href="#xUseCaseR31-030" onmousedown="makeVisible('UseCaseR31-030');" onmouseover="makeVisible('UseCaseR31-030');" id="xUseCaseR31-030">[+]</a><font size="-1">
                     <div id="UseCaseR31-030" style="position:absolute; left:20; width:410px; visibility:hidden"><font face="verdana, arial, helvetica, sans-serif" size="2">
                           <div style="float:left; background-color:white; padding:3px; border:1px solid black"><span style="float:right; background-color:gray; color:white; font-weight:bold; width='20px'; text-align:center; cursor:pointer" onclick="makeInvisible('UseCaseR31-030')">&nbsp;X&nbsp;</span><b>UseCaseR31-030:</b><br><br><b>Spec Dependencies</b>:<br>spec = XQ31+<br>spec = XQ30+<br><br><b>Test</b>: array {
                              for $page in doc("UseCaseR31/Wikipedia-Origami.xml")//page
                              return map {
                              "title": string($page/title),
                              "id" : string($page/id),
                              "last updated" : string($page/revision[1]/timestamp),
                              "authors" : array {
                              for $a in $page/revision/contributor/username
                              return string($a)
                              }
                              }
                              }
                           </div></font></div></font></td>
               <td valign="top" bgcolor="palegreen">pass</td>
               <td valign="top" bgcolor="white">n/a
                  <div align="left" width="20"><font size="1">
                        <p>test-set dependencies not satisfied</p></font></div>
               </td>
               <td valign="top" bgcolor="palegreen">pass</td>
               <td valign="top" bgcolor="white">n/a</td>
               <td valign="top" bgcolor="palegreen">pass</td>
               <td valign="top" bgcolor="palegreen">pass</td>
               <td valign="top" bgcolor="tomato">fail</td>
            </tr>
            <tr>
               <td valign="top">&nbsp;&nbsp;&nbsp;&nbsp;<a name="#xUseCaseR31-031">UseCaseR31-031</a><a href="#xUseCaseR31-031" onmousedown="makeVisible('UseCaseR31-031');" onmouseover="makeVisible('UseCaseR31-031');" id="xUseCaseR31-031">[+]</a><font size="-1">
                     <div id="UseCaseR31-031" style="position:absolute; left:20; width:410px; visibility:hidden"><font face="verdana, arial, helvetica, sans-serif" size="2">
                           <div style="float:left; background-color:white; padding:3px; border:1px solid black"><span style="float:right; background-color:gray; color:white; font-weight:bold; width='20px'; text-align:center; cursor:pointer" onclick="makeInvisible('UseCaseR31-031')">&nbsp;X&nbsp;</span><b>UseCaseR31-031:</b><br><br><b>Spec Dependencies</b>:<br>spec = XQ31+<br>spec = XQ30+<br><br><b>Test</b>: 
                              &lt;html&gt;&lt;body&gt;&lt;table&gt;
                              &lt;tr&gt; (: Column headings :)
                              {
                              &lt;th&gt; &lt;/th&gt;,
                              for $th in json-doc('http://www.w3.org/qt3/app/UseCaseR31/table-json')?col-labels?*
                              return &lt;th&gt;{ $th }&lt;/th&gt;
                              }
                              &lt;/tr&gt;
                              {  (: Data for each row :)
                              for $r at $i in json-doc('http://www.w3.org/qt3/app/UseCaseR31/table-json')?data?*
                              return
                              &lt;tr&gt;
                              {
                              &lt;th&gt;{ json-doc('http://www.w3.org/qt3/app/UseCaseR31/table-json')?row-labels[$i] }&lt;/th&gt;,
                              for $c in $r?*
                              return &lt;td&gt;{ $c }&lt;/td&gt;
                              }
                              &lt;/tr&gt;
                              }
                              &lt;/table&gt;
                              
                              &lt;/body&gt;
                              &lt;/html&gt;
                              
                           </div></font></div></font></td>
               <td valign="top" bgcolor="palegreen">pass</td>
               <td valign="top" bgcolor="white">n/a
                  <div align="left" width="20"><font size="1">
                        <p>test-set dependencies not satisfied</p></font></div>
               </td>
               <td valign="top" bgcolor="palegreen">pass</td>
               <td valign="top" bgcolor="white">n/a</td>
               <td valign="top" bgcolor="palegreen">pass</td>
               <td valign="top" bgcolor="palegreen">pass</td>
               <td valign="top" bgcolor="palegreen">pass</td>
            </tr>
            <tr>
               <td valign="top">&nbsp;&nbsp;&nbsp;&nbsp;<a name="#xd1e41628">d1e41628</a><a href="#xd1e41628" onmousedown="makeVisible('d1e41628');" onmouseover="makeVisible('d1e41628');" id="xd1e41628">[+]</a><font size="-1">
                     <div id="d1e41628" style="position:absolute; left:20; width:410px; visibility:hidden"><font face="verdana, arial, helvetica, sans-serif" size="2">
                           <div style="float:left; background-color:white; padding:3px; border:1px solid black"><span style="float:right; background-color:gray; color:white; font-weight:bold; width='20px'; text-align:center; cursor:pointer" onclick="makeInvisible('d1e41628')">&nbsp;X&nbsp;</span><b>d1e41628:</b><br><br><b>Spec Dependencies</b>:<br>spec = XQ31+<br><br><b>Test</b>: 
                              array { "a", "b", "c" }
                           </div></font></div></font></td>
               <td valign="top" bgcolor="palegreen">pass</td>
               <td valign="top" bgcolor="white">n/a
                  <div align="left" width="20"><font size="1">
                        <p>test-set dependencies not satisfied</p></font></div>
               </td>
               <td valign="top" bgcolor="palegreen">pass</td>
               <td valign="top" bgcolor="white">n/a</td>
               <td valign="top" bgcolor="palegreen">pass</td>
               <td valign="top" bgcolor="palegreen">pass</td>
               <td valign="top" bgcolor="palegreen">pass</td>
            </tr>
            <tr>
               <td valign="top">&nbsp;&nbsp;&nbsp;&nbsp;<a name="#xd1e41659">d1e41659</a><a href="#xd1e41659" onmousedown="makeVisible('d1e41659');" onmouseover="makeVisible('d1e41659');" id="xd1e41659">[+]</a><font size="-1">
                     <div id="d1e41659" style="position:absolute; left:20; width:410px; visibility:hidden"><font face="verdana, arial, helvetica, sans-serif" size="2">
                           <div style="float:left; background-color:white; padding:3px; border:1px solid black"><span style="float:right; background-color:gray; color:white; font-weight:bold; width='20px'; text-align:center; cursor:pointer" onclick="makeInvisible('d1e41659')">&nbsp;X&nbsp;</span><b>d1e41659:</b><br><br><b>Spec Dependencies</b>:<br>spec = XQ31+<br><br><b>Test</b>: 
                              array {["a", "b", "c"], "d" }
                           </div></font></div></font></td>
               <td valign="top" bgcolor="palegreen">pass</td>
               <td valign="top" bgcolor="white">n/a
                  <div align="left" width="20"><font size="1">
                        <p>test-set dependencies not satisfied</p></font></div>
               </td>
               <td valign="top" bgcolor="palegreen">pass</td>
               <td valign="top" bgcolor="white">n/a</td>
               <td valign="top" bgcolor="palegreen">pass</td>
               <td valign="top" bgcolor="palegreen">pass</td>
               <td valign="top" bgcolor="palegreen">pass</td>
            </tr>
         </tbody>
      </table>
   </body>
</html>