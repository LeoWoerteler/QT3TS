<html>
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><script language="JavaScript" type="text/javascript">
         function doMenu(item) {
         obj=document.getElementById(item);
         col=document.getElementById("x" + item);
         if (obj.style.display=="none") { obj.style.display="block"; col.innerHTML="[-]"; }
         else { obj.style.display="none"; col.innerHTML="[+]"; } }
      </script><script language="JavaScript" type="text/javascript">
          (document.getElementById) ? domNode = true: domNode = false;
          var current = null;
          
          function makeVisible(item) {
               if(current != null) {
                  makeInvisible(current);
              }
              if (domNode) {
                  document.getElementById(item).style.visibility = 'visible';
                  current = item;
                  
              }
          }
          
          function makeInvisible(item) {
              if (domNode) {
                  document.getElementById(item).style.visibility = 'hidden';
                  current = item;
              }
          }
      </script></head>
   <body><button type="button" onclick="window.location='../report.html'">Back to Main
         Report</button><table border="0" width="100%">
         <tr>
            <td>
               <table align="right">
                  <tr>
                     <td>Legend:&nbsp;&nbsp;&nbsp;&nbsp;</td>
                     <td>
                        <table frame="border">
                           <tr>
                              <td bgcolor="mediumseagreen">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
                           </tr>
                        </table>
                     </td>
                     <td>passed</td>
                     <td>&nbsp;&nbsp;&nbsp;&nbsp;</td>
                     <td>
                        <table frame="border">
                           <tr>
                              <td bgcolor="palegreen">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
                           </tr>
                        </table>
                     </td>
                     <td>almost passed<br>(â‰¥ 98%)
                     </td>
                     <td>&nbsp;&nbsp;&nbsp;&nbsp;</td>
                     <td>
                        <table frame="border">
                           <tr>
                              <td bgcolor="coral">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
                           </tr>
                        </table>
                     </td>
                     <td>failed</td>
                     <td>&nbsp;&nbsp;&nbsp;&nbsp;</td>
                     <td>
                        <table frame="border">
                           <tr>
                              <td bgcolor="white">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
                           </tr>
                        </table>
                     </td>
                     <td>untested</td>
                  </tr>
               </table>
            </td>
         </tr>
      </table>
      <table frame="hsides" rules="groups" border="1" bordercolor="black" bgcolor="lightcyan" cellpadding="2">
         <thead>
            <tr>
               <td></td>
               <td colspan="8" style="text-align:center"><b>Implementations</b></td>
            </tr>
            <tr>
               <th>Tests</th>
               <th valign="top"><a href="../results_BaseX_8.5 beta_d4.html">BaseX 8.5 beta</a><br>XQ31<br><font size="-1">(QT3 vCVS)</font></th>
               <th valign="top"><a href="../results_Exselt_1.1 beta_d2.html">Exselt 1.1 beta</a><br>XP30<br><font size="-1">(QT3 vCVS)</font></th>
               <th valign="top"><a href="../results_Saxon-EE_9.7.0.11_d5.html">Saxon-EE 9.7.0.11</a><br>XP31
               </th>
               <th valign="top"><a href="../results_Saxon-EE_9.7.0.11_d7.html">Saxon-EE 9.7.0.11</a><br>XQ31
               </th>
               <th valign="top"><a href="../results_XmlPrime_4.0.0.16079_d6.html">XmlPrime 4.0.0.16079</a><br>XP31<br><font size="-1">(QT3 vCVS)</font></th>
               <th valign="top"><a href="../results_XmlPrime_4.0.0.26293_d8.html">XmlPrime 4.0.0.26293</a><br>XQ31<br><font size="-1">(QT3 vCVS)</font></th>
               <th valign="top"><a href="../results_XmlPrime_4.0.0.27704_d9.html">XmlPrime 4.0.0.27704</a><br>XQX31<br><font size="-1">(QT3 vCVS)</font></th>
               <th valign="top"><a href="../results_anonymous_r3721380_d3.html">anonymous r3721380</a><br>XQ31<br><font size="-1">(QT3 vCVS)</font></th>
            </tr>
         </thead>
         <tr>
            <td valign="top">app-UseCaseR31</td>
            <td align="center" bgcolor="coral">22/25</td>
            <td align="center" bgcolor="white">0/0</td>
            <td align="center" bgcolor="white">0/0</td>
            <td align="center" bgcolor="mediumseagreen">25/25</td>
            <td align="center" bgcolor="white">0/0</td>
            <td align="center" bgcolor="mediumseagreen">25/25</td>
            <td align="center" bgcolor="palegreen">25/0</td>
            <td align="center" bgcolor="coral">20/25</td>
            <td align="center" bgcolor="">0/8</td>
         </tr>
         <tr>
            <td valign="top">&nbsp;&nbsp;&nbsp;&nbsp;<a name="#xUseCaseR31-001">UseCaseR31-001</a><a href="#xUseCaseR31-001" onmousedown="makeVisible('UseCaseR31-001');" onmouseover="makeVisible('UseCaseR31-001');" id="xUseCaseR31-001">[+]</a><font size="-1">
                  <div id="UseCaseR31-001" style="position:absolute; left:20; width:410px; visibility:hidden"><font face="verdana, arial, helvetica, sans-serif" size="2">
                        <div style="float:left; background-color:white; padding:3px; border:1px solid black"><span style="float:right; background-color:gray; color:white; font-weight:bold; width='20px'; text-align:center; cursor:pointer" onclick="makeInvisible('UseCaseR31-001')">&nbsp;X&nbsp;</span><b>UseCaseR31-001:</b><br><br><b>Spec Dependencies</b>:<br>spec = XQ30+<br><br><b>Test</b>: 
                           for $e in /employees/employee,
                           $d in $e/department
                           group by $d
                           return
                           &lt;department name="{$d}"&gt;
                           {
                           let $max := max($e/salary)
                           return $e[salary=$max]
                           }
                           &lt;/department&gt;
                           
                        </div></font></div></font></td>
            <td valign="top" bgcolor="palegreen">pass</td>
            <td valign="top" bgcolor="salmon">no result</td>
            <td valign="top" bgcolor="white">n/a
               <div align="left" width="20"><font size="1">
                     <p>test-set dependencies not satisfied</p></font></div>
            </td>
            <td valign="top" bgcolor="palegreen">pass</td>
            <td valign="top" bgcolor="white">n/a</td>
            <td valign="top" bgcolor="palegreen">pass</td>
            <td valign="top" bgcolor="palegreen">pass</td>
            <td valign="top" bgcolor="palegreen">pass</td>
         </tr>
         <tr>
            <td valign="top">&nbsp;&nbsp;&nbsp;&nbsp;<a name="#xUseCaseR31-002">UseCaseR31-002</a><a href="#xUseCaseR31-002" onmousedown="makeVisible('UseCaseR31-002');" onmouseover="makeVisible('UseCaseR31-002');" id="xUseCaseR31-002">[+]</a><font size="-1">
                  <div id="UseCaseR31-002" style="position:absolute; left:20; width:410px; visibility:hidden"><font face="verdana, arial, helvetica, sans-serif" size="2">
                        <div style="float:left; background-color:white; padding:3px; border:1px solid black"><span style="float:right; background-color:gray; color:white; font-weight:bold; width='20px'; text-align:center; cursor:pointer" onclick="makeInvisible('UseCaseR31-002')">&nbsp;X&nbsp;</span><b>UseCaseR31-002:</b><br><br><b>Spec Dependencies</b>:<br>spec = XQ31+<br>spec = XQ30+<br><br><b>Test</b>: 
                           for $e in /employees/employee,
                           $d in $e/department
                           group by $d
                           return
                           map {
                           "department" : $d,
                           "highest paid employee" :
                           let $max := max($e/salary)
                           return $e[salary=$max]/name/text()}
                        </div></font></div></font></td>
            <td valign="top" bgcolor="palegreen">pass</td>
            <td valign="top" bgcolor="salmon">no result</td>
            <td valign="top" bgcolor="white">n/a
               <div align="left" width="20"><font size="1">
                     <p>test-set dependencies not satisfied</p></font></div>
            </td>
            <td valign="top" bgcolor="palegreen">pass</td>
            <td valign="top" bgcolor="white">n/a</td>
            <td valign="top" bgcolor="palegreen">pass</td>
            <td valign="top" bgcolor="palegreen">pass</td>
            <td valign="top" bgcolor="palegreen">pass</td>
         </tr>
         <tr>
            <td valign="top">&nbsp;&nbsp;&nbsp;&nbsp;<a name="#xUseCaseR31-003">UseCaseR31-003</a><a href="#xUseCaseR31-003" onmousedown="makeVisible('UseCaseR31-003');" onmouseover="makeVisible('UseCaseR31-003');" id="xUseCaseR31-003">[+]</a><font size="-1">
                  <div id="UseCaseR31-003" style="position:absolute; left:20; width:410px; visibility:hidden"><font face="verdana, arial, helvetica, sans-serif" size="2">
                        <div style="float:left; background-color:white; padding:3px; border:1px solid black"><span style="float:right; background-color:gray; color:white; font-weight:bold; width='20px'; text-align:center; cursor:pointer" onclick="makeInvisible('UseCaseR31-003')">&nbsp;X&nbsp;</span><b>UseCaseR31-003:</b><br><br><b>Spec Dependencies</b>:<br>spec = XQ30+<br><br><b>Test</b>:    &lt;out&gt;  {
                           for $employee in /employees/employee
                           let $salary := $employee/salary
                           group by $department := $employee/department
                           let $max-salary := max($salary)
                           let $highest-earners := $employee[salary = $max-salary]
                           return
                           &lt;department name="{$department}"&gt;{ $highest-earners }&lt;/department&gt;,
                           
                           for $employee in /employees/employee
                           let $salary := $employee/salary
                           group by $job-type := $employee/employeeType
                           let $totals := count($employee)
                           return
                           &lt;total-by-job-type type="{$job-type}"&gt;{ $totals }&lt;/total-by-job-type&gt;
                           }&lt;/out&gt;
                           
                        </div></font></div></font></td>
            <td valign="top" bgcolor="palegreen">pass</td>
            <td valign="top" bgcolor="salmon">no result</td>
            <td valign="top" bgcolor="white">n/a
               <div align="left" width="20"><font size="1">
                     <p>test-set dependencies not satisfied</p></font></div>
            </td>
            <td valign="top" bgcolor="palegreen">pass</td>
            <td valign="top" bgcolor="white">n/a</td>
            <td valign="top" bgcolor="palegreen">pass</td>
            <td valign="top" bgcolor="palegreen">pass</td>
            <td valign="top" bgcolor="palegreen">pass</td>
         </tr>
         <tr>
            <td valign="top">&nbsp;&nbsp;&nbsp;&nbsp;<a name="#xUseCaseR31-004">UseCaseR31-004</a><a href="#xUseCaseR31-004" onmousedown="makeVisible('UseCaseR31-004');" onmouseover="makeVisible('UseCaseR31-004');" id="xUseCaseR31-004">[+]</a><font size="-1">
                  <div id="UseCaseR31-004" style="position:absolute; left:20; width:410px; visibility:hidden"><font face="verdana, arial, helvetica, sans-serif" size="2">
                        <div style="float:left; background-color:white; padding:3px; border:1px solid black"><span style="float:right; background-color:gray; color:white; font-weight:bold; width='20px'; text-align:center; cursor:pointer" onclick="makeInvisible('UseCaseR31-004')">&nbsp;X&nbsp;</span><b>UseCaseR31-004:</b><br><br><b>Spec Dependencies</b>:<br>spec = XQ31+<br>spec = XQ30+<br><br><b>Test</b>: 
                           declare namespace map="http://www.w3.org/2005/xpath-functions/map";
                           
                           for $employee in /employees/employee
                           let $salary := $employee/salary
                           group by $department := $employee/department
                           let $max-salary := max($salary)
                           let $highest-earners := $employee[salary = $max-salary]
                           return
                           map{ "first" : map {
                           "department" : $department,
                           "highest earners" : $highest-earners/name/text()
                           }
                           , "job type count" : map:merge(
                           for $employee in /employees/employee
                           let $salary := $employee/salary
                           group by $job-type := $employee/employeeType
                           let $totals := count($employee)
                           return map {
                           $job-type : $totals
                           }
                           )}
                           
                        </div></font></div></font></td>
            <td valign="top" bgcolor="palegreen">pass</td>
            <td valign="top" bgcolor="salmon">no result</td>
            <td valign="top" bgcolor="white">n/a
               <div align="left" width="20"><font size="1">
                     <p>test-set dependencies not satisfied</p></font></div>
            </td>
            <td valign="top" bgcolor="palegreen">pass</td>
            <td valign="top" bgcolor="white">n/a</td>
            <td valign="top" bgcolor="palegreen">pass</td>
            <td valign="top" bgcolor="palegreen">pass</td>
            <td valign="top" bgcolor="palegreen">pass</td>
         </tr>
         <tr>
            <td valign="top">&nbsp;&nbsp;&nbsp;&nbsp;<a name="#xUseCaseR31-009">UseCaseR31-009</a><a href="#xUseCaseR31-009" onmousedown="makeVisible('UseCaseR31-009');" onmouseover="makeVisible('UseCaseR31-009');" id="xUseCaseR31-009">[+]</a><font size="-1">
                  <div id="UseCaseR31-009" style="position:absolute; left:20; width:410px; visibility:hidden"><font face="verdana, arial, helvetica, sans-serif" size="2">
                        <div style="float:left; background-color:white; padding:3px; border:1px solid black"><span style="float:right; background-color:gray; color:white; font-weight:bold; width='20px'; text-align:center; cursor:pointer" onclick="makeInvisible('UseCaseR31-009')">&nbsp;X&nbsp;</span><b>UseCaseR31-009:</b><br><br><b>Spec Dependencies</b>:<br>feature = higherOrderFunctions<br>spec = XQ31+<br>spec = XQ30+<br><br><b>Test</b>: 
                           declare namespace map="http://www.w3.org/2005/xpath-functions/map";
                           declare variable $book:= (&lt;book&gt;
                           &lt;isbn&gt;0470192747&lt;/isbn&gt;
                           &lt;publisher&gt;Wiley&lt;/publisher&gt;
                           &lt;title&gt;XSLT 2.0 and XPath 2.0 Programmer's Reference&lt;/title&gt;
                           &lt;/book&gt;);
                           
                           declare variable $author := (&lt;author&gt;
                           &lt;name&gt;Michael H. Kay&lt;/name&gt;
                           &lt;isbn&gt;0470192747&lt;/isbn&gt;
                           &lt;isbn&gt;...&lt;/isbn&gt;
                           &lt;/author&gt;);
                           
                           declare variable $index := map:merge($book ! map{isbn : .});
                           
                           &lt;table&gt;{
                           for $a in $author
                           return &lt;tr&gt;
                           &lt;td&gt;{ $a/name/string() }&lt;/td&gt;
                           &lt;td&gt;{ string-join($a/isbn ! $index(.)/title/string(), ", ") }&lt;/td&gt;
                           &lt;/tr&gt;
                           }&lt;/table&gt;
                           
                        </div></font></div></font></td>
            <td valign="top" bgcolor="tomato">fail</td>
            <td valign="top" bgcolor="salmon">no result</td>
            <td valign="top" bgcolor="white">n/a
               <div align="left" width="20"><font size="1">
                     <p>test-set dependencies not satisfied</p></font></div>
            </td>
            <td valign="top" bgcolor="palegreen">pass</td>
            <td valign="top" bgcolor="white">n/a</td>
            <td valign="top" bgcolor="palegreen">pass</td>
            <td valign="top" bgcolor="palegreen">pass</td>
            <td valign="top" bgcolor="palegreen">pass</td>
         </tr>
         <tr>
            <td valign="top">&nbsp;&nbsp;&nbsp;&nbsp;<a name="#xUseCaseR31-012">UseCaseR31-012</a><a href="#xUseCaseR31-012" onmousedown="makeVisible('UseCaseR31-012');" onmouseover="makeVisible('UseCaseR31-012');" id="xUseCaseR31-012">[+]</a><font size="-1">
                  <div id="UseCaseR31-012" style="position:absolute; left:20; width:410px; visibility:hidden"><font face="verdana, arial, helvetica, sans-serif" size="2">
                        <div style="float:left; background-color:white; padding:3px; border:1px solid black"><span style="float:right; background-color:gray; color:white; font-weight:bold; width='20px'; text-align:center; cursor:pointer" onclick="makeInvisible('UseCaseR31-012')">&nbsp;X&nbsp;</span><b>UseCaseR31-012:</b><br><br><b>Spec Dependencies</b>:<br>feature = higherOrderFunctions<br>spec = XQ31+<br>spec = XQ30+<br><br><b>Test</b>: declare function local:play(
                           $secret-number as xs:integer,
                           $guessed-number as xs:integer,
                           $translator as function(xs:string) as xs:string)
                           {
                           switch (true())
                           case $guessed-number eq $secret-number
                           return $translator("You won!")
                           case $guessed-number lt $secret-number
                           return $translator("The secret number is greater.")
                           default (: $guessed-number gt $secret-number :)
                           return $translator("The secret number is lower.")
                           };
                           
                           local:play(76, 86, function($x) { $x }), (: Keep English :)
                           
                           local:play(76, 86, map {
                           "You won!" : "Du hast gewonnen!",
                           "The secret number is greater." : "Die geheime Zahl ist groesser.",
                           "The secret number is lower." :  "Die geheime Zahl ist kleiner." }
                           )
                           
                        </div></font></div></font></td>
            <td valign="top" bgcolor="palegreen">pass</td>
            <td valign="top" bgcolor="salmon">no result</td>
            <td valign="top" bgcolor="white">n/a
               <div align="left" width="20"><font size="1">
                     <p>test-set dependencies not satisfied</p></font></div>
            </td>
            <td valign="top" bgcolor="palegreen">pass</td>
            <td valign="top" bgcolor="white">n/a</td>
            <td valign="top" bgcolor="palegreen">pass</td>
            <td valign="top" bgcolor="palegreen">pass</td>
            <td valign="top" bgcolor="palegreen">pass</td>
         </tr>
         <tr>
            <td valign="top">&nbsp;&nbsp;&nbsp;&nbsp;<a name="#xUseCaseR31-013">UseCaseR31-013</a><a href="#xUseCaseR31-013" onmousedown="makeVisible('UseCaseR31-013');" onmouseover="makeVisible('UseCaseR31-013');" id="xUseCaseR31-013">[+]</a><font size="-1">
                  <div id="UseCaseR31-013" style="position:absolute; left:20; width:410px; visibility:hidden"><font face="verdana, arial, helvetica, sans-serif" size="2">
                        <div style="float:left; background-color:white; padding:3px; border:1px solid black"><span style="float:right; background-color:gray; color:white; font-weight:bold; width='20px'; text-align:center; cursor:pointer" onclick="makeInvisible('UseCaseR31-013')">&nbsp;X&nbsp;</span><b>UseCaseR31-013:</b><br><br><b>Spec Dependencies</b>:<br>feature = higherOrderFunctions<br>spec = XQ31+<br>spec = XQ30+<br><br><b>Test</b>: 
                           declare variable $s :=[['A', 'DT'], ['bride', 'NN'], [',', ','], ['you', 'PRP'], ['know',
                           'VBP'], [',', ','], ['must', 'MD'],
                           ['appear', 'VB'], ['like', 'IN'], ['a', 'DT'], ['bride', 'NN'], [',', ','], ['but',
                           'CC'], ['my', 'PRP$'],
                           ['natural', 'JJ'], ['taste', 'NN'], ['is', 'VBZ'], ['all', 'DT'], ['for', 'IN'], ['simplicity',
                           'NN'], [';', ':'],
                           ['a', 'DT'], ['simple', 'JJ'], ['style', 'NN'], ['of', 'IN'], ['dress', 'NN'], ['is',
                           'VBZ'],
                           ['so', 'RB'], ['infinitely', 'RB'], ['preferable', 'JJ'], ['to', 'TO'], ['finery',
                           'VB'], ['.', '.']
                           ];
                           &lt;s&gt;
                           {
                           for $w in $s?*
                           return &lt;w pos="{ $w(2) }"&gt;{ $w(1) }&lt;/w&gt;
                           }
                           &lt;/s&gt;
                           
                           
                        </div></font></div></font></td>
            <td valign="top" bgcolor="palegreen">pass</td>
            <td valign="top" bgcolor="salmon">no result</td>
            <td valign="top" bgcolor="white">n/a
               <div align="left" width="20"><font size="1">
                     <p>test-set dependencies not satisfied</p></font></div>
            </td>
            <td valign="top" bgcolor="palegreen">pass</td>
            <td valign="top" bgcolor="white">n/a</td>
            <td valign="top" bgcolor="palegreen">pass</td>
            <td valign="top" bgcolor="palegreen">pass</td>
            <td valign="top" bgcolor="palegreen">pass</td>
         </tr>
         <tr>
            <td valign="top">&nbsp;&nbsp;&nbsp;&nbsp;<a name="#xUseCaseR31-014">UseCaseR31-014</a><a href="#xUseCaseR31-014" onmousedown="makeVisible('UseCaseR31-014');" onmouseover="makeVisible('UseCaseR31-014');" id="xUseCaseR31-014">[+]</a><font size="-1">
                  <div id="UseCaseR31-014" style="position:absolute; left:20; width:410px; visibility:hidden"><font face="verdana, arial, helvetica, sans-serif" size="2">
                        <div style="float:left; background-color:white; padding:3px; border:1px solid black"><span style="float:right; background-color:gray; color:white; font-weight:bold; width='20px'; text-align:center; cursor:pointer" onclick="makeInvisible('UseCaseR31-014')">&nbsp;X&nbsp;</span><b>UseCaseR31-014:</b><br><br><b>Spec Dependencies</b>:<br>feature = higherOrderFunctions<br>spec = XQ31+<br>spec = XQ30+<br><br><b>Test</b>: 
                           declare variable $s :=[['A', 'DT'], ['bride', 'NN'], [',', ','], ['you', 'PRP'], ['know',
                           'VBP'], [',', ','], ['must', 'MD'],
                           ['appear', 'VB'], ['like', 'IN'], ['a', 'DT'], ['bride', 'NN'], [',', ','], ['but',
                           'CC'], ['my', 'PRP$'],
                           ['natural', 'JJ'], ['taste', 'NN'], ['is', 'VBZ'], ['all', 'DT'], ['for', 'IN'], ['simplicity',
                           'NN'], [';', ':'],
                           ['a', 'DT'], ['simple', 'JJ'], ['style', 'NN'], ['of', 'IN'], ['dress', 'NN'], ['is',
                           'VBZ'],
                           ['so', 'RB'], ['infinitely', 'RB'], ['preferable', 'JJ'], ['to', 'TO'], ['finery',
                           'VB'], ['.', '.']
                           ];
                           declare variable $index := map { "pos" : 2, "lemma" : 1 };
                           
                           &lt;s&gt;
                           {
                           for $w in $s?*
                           return &lt;w pos="{ $w($index("pos")) }"&gt;{ $w($index("lemma")) }&lt;/w&gt;
                           }
                           &lt;/s&gt;
                        </div></font></div></font></td>
            <td valign="top" bgcolor="palegreen">pass</td>
            <td valign="top" bgcolor="salmon">no result</td>
            <td valign="top" bgcolor="white">n/a
               <div align="left" width="20"><font size="1">
                     <p>test-set dependencies not satisfied</p></font></div>
            </td>
            <td valign="top" bgcolor="palegreen">pass</td>
            <td valign="top" bgcolor="white">n/a</td>
            <td valign="top" bgcolor="palegreen">pass</td>
            <td valign="top" bgcolor="palegreen">pass</td>
            <td valign="top" bgcolor="palegreen">pass</td>
         </tr>
         <tr>
            <td valign="top">&nbsp;&nbsp;&nbsp;&nbsp;<a name="#xUseCaseR31-015">UseCaseR31-015</a><a href="#xUseCaseR31-015" onmousedown="makeVisible('UseCaseR31-015');" onmouseover="makeVisible('UseCaseR31-015');" id="xUseCaseR31-015">[+]</a><font size="-1">
                  <div id="UseCaseR31-015" style="position:absolute; left:20; width:410px; visibility:hidden"><font face="verdana, arial, helvetica, sans-serif" size="2">
                        <div style="float:left; background-color:white; padding:3px; border:1px solid black"><span style="float:right; background-color:gray; color:white; font-weight:bold; width='20px'; text-align:center; cursor:pointer" onclick="makeInvisible('UseCaseR31-015')">&nbsp;X&nbsp;</span><b>UseCaseR31-015:</b><br><br><b>Spec Dependencies</b>:<br>feature = higherOrderFunctions<br>spec = XQ31+<br>spec = XQ30+<br><br><b>Test</b>: 
                           declare variable $s :=[['A', 'DT'], ['bride', 'NN'], [',', ','], ['you', 'PRP'], ['know',
                           'VBP'], [',', ','], ['must', 'MD'],
                           ['appear', 'VB'], ['like', 'IN'], ['a', 'DT'], ['bride', 'NN'], [',', ','], ['but',
                           'CC'], ['my', 'PRP$'],
                           ['natural', 'JJ'], ['taste', 'NN'], ['is', 'VBZ'], ['all', 'DT'], ['for', 'IN'], ['simplicity',
                           'NN'], [';', ':'],
                           ['a', 'DT'], ['simple', 'JJ'], ['style', 'NN'], ['of', 'IN'], ['dress', 'NN'], ['is',
                           'VBZ'],
                           ['so', 'RB'], ['infinitely', 'RB'], ['preferable', 'JJ'], ['to', 'TO'], ['finery',
                           'VB'], ['.', '.']
                           ];
                           declare variable $index := map { "pos" : 2, "lemma" : 1 };
                           
                           for $word in $s?*
                           let $pos := $word(2)
                           let $lexeme := $word(1)
                           where $pos = ("JJ", "NN", "RB", "VB")
                           group by $pos
                           order by $pos
                           return
                           &lt;pos name="{$pos}"&gt;
                           {
                           for $l in distinct-values($lexeme)
                           return &lt;lexeme&gt;{ $l }&lt;/lexeme&gt;
                           }
                           &lt;/pos&gt;
                        </div></font></div></font></td>
            <td valign="top" bgcolor="palegreen">pass</td>
            <td valign="top" bgcolor="salmon">no result</td>
            <td valign="top" bgcolor="white">n/a
               <div align="left" width="20"><font size="1">
                     <p>test-set dependencies not satisfied</p></font></div>
            </td>
            <td valign="top" bgcolor="palegreen">pass</td>
            <td valign="top" bgcolor="white">n/a</td>
            <td valign="top" bgcolor="palegreen">pass</td>
            <td valign="top" bgcolor="palegreen">pass</td>
            <td valign="top" bgcolor="palegreen">pass</td>
         </tr>
         <tr>
            <td valign="top">&nbsp;&nbsp;&nbsp;&nbsp;<a name="#xUseCaseR31-016">UseCaseR31-016</a><a href="#xUseCaseR31-016" onmousedown="makeVisible('UseCaseR31-016');" onmouseover="makeVisible('UseCaseR31-016');" id="xUseCaseR31-016">[+]</a><font size="-1">
                  <div id="UseCaseR31-016" style="position:absolute; left:20; width:410px; visibility:hidden"><font face="verdana, arial, helvetica, sans-serif" size="2">
                        <div style="float:left; background-color:white; padding:3px; border:1px solid black"><span style="float:right; background-color:gray; color:white; font-weight:bold; width='20px'; text-align:center; cursor:pointer" onclick="makeInvisible('UseCaseR31-016')">&nbsp;X&nbsp;</span><b>UseCaseR31-016:</b><br><br><b>Spec Dependencies</b>:<br>feature = higherOrderFunctions<br>spec = XQ31+<br>spec = XQ30+<br><br><b>Test</b>: 
                           declare variable $s :=[['A', 'DT'], ['bride', 'NN'], [',', ','], ['you', 'PRP'], ['know',
                           'VBP'], [',', ','], ['must', 'MD'],
                           ['appear', 'VB'], ['like', 'IN'], ['a', 'DT'], ['bride', 'NN'], [',', ','], ['but',
                           'CC'], ['my', 'PRP$'],
                           ['natural', 'JJ'], ['taste', 'NN'], ['is', 'VBZ'], ['all', 'DT'], ['for', 'IN'], ['simplicity',
                           'NN'], [';', ':'],
                           ['a', 'DT'], ['simple', 'JJ'], ['style', 'NN'], ['of', 'IN'], ['dress', 'NN'], ['is',
                           'VBZ'],
                           ['so', 'RB'], ['infinitely', 'RB'], ['preferable', 'JJ'], ['to', 'TO'], ['finery',
                           'VB'], ['.', '.']
                           ];
                           declare function local:words-only($s)
                           {
                           for $w in $s
                           where not($w(2) = (".", ",", ";", ":"))
                           return $w(1)
                           };
                           
                           for sliding window $w in local:words-only($s?*)
                           start at $i when true()
                           only end at $j when $j - $i eq 2
                           return
                           array { $w }
                        </div></font></div></font></td>
            <td valign="top" bgcolor="palegreen">pass</td>
            <td valign="top" bgcolor="salmon">no result</td>
            <td valign="top" bgcolor="white">n/a
               <div align="left" width="20"><font size="1">
                     <p>test-set dependencies not satisfied</p></font></div>
            </td>
            <td valign="top" bgcolor="palegreen">pass</td>
            <td valign="top" bgcolor="white">n/a</td>
            <td valign="top" bgcolor="palegreen">pass</td>
            <td valign="top" bgcolor="palegreen">pass</td>
            <td valign="top" bgcolor="palegreen">pass</td>
         </tr>
         <tr>
            <td valign="top">&nbsp;&nbsp;&nbsp;&nbsp;<a name="#xUseCaseR31-017">UseCaseR31-017</a><a href="#xUseCaseR31-017" onmousedown="makeVisible('UseCaseR31-017');" onmouseover="makeVisible('UseCaseR31-017');" id="xUseCaseR31-017">[+]</a><font size="-1">
                  <div id="UseCaseR31-017" style="position:absolute; left:20; width:410px; visibility:hidden"><font face="verdana, arial, helvetica, sans-serif" size="2">
                        <div style="float:left; background-color:white; padding:3px; border:1px solid black"><span style="float:right; background-color:gray; color:white; font-weight:bold; width='20px'; text-align:center; cursor:pointer" onclick="makeInvisible('UseCaseR31-017')">&nbsp;X&nbsp;</span><b>UseCaseR31-017:</b><br><br><b>Spec Dependencies</b>:<br>feature = higherOrderFunctions<br>spec = XQ31+<br>spec = XQ30+<br><br><b>Test</b>: 
                           declare variable $s :=[['A', 'DT'], ['bride', 'NN'], [',', ','], ['you', 'PRP'], ['know',
                           'VBP'], [',', ','], ['must', 'MD'],
                           ['appear', 'VB'], ['like', 'IN'], ['a', 'DT'], ['bride', 'NN'], [',', ','], ['but',
                           'CC'], ['my', 'PRP$'],
                           ['natural', 'JJ'], ['taste', 'NN'], ['is', 'VBZ'], ['all', 'DT'], ['for', 'IN'], ['simplicity',
                           'NN'], [';', ':'],
                           ['a', 'DT'], ['simple', 'JJ'], ['style', 'NN'], ['of', 'IN'], ['dress', 'NN'], ['is',
                           'VBZ'],
                           ['so', 'RB'], ['infinitely', 'RB'], ['preferable', 'JJ'], ['to', 'TO'], ['finery',
                           'VB'], ['.', '.']
                           ];
                           declare function local:filter($s as item()*, $p as function(item()) as xs:boolean)
                           {
                           array { $s[$p(.)] },   array { $s[not($p(.))] }
                           };
                           
                           let $f := function($a) { starts-with($a(2), "VB") }
                           return
                           local:filter($s?*, $f)
                        </div></font></div></font></td>
            <td valign="top" bgcolor="palegreen">pass</td>
            <td valign="top" bgcolor="salmon">no result</td>
            <td valign="top" bgcolor="white">n/a
               <div align="left" width="20"><font size="1">
                     <p>test-set dependencies not satisfied</p></font></div>
            </td>
            <td valign="top" bgcolor="palegreen">pass</td>
            <td valign="top" bgcolor="white">n/a</td>
            <td valign="top" bgcolor="palegreen">pass</td>
            <td valign="top" bgcolor="palegreen">pass</td>
            <td valign="top" bgcolor="palegreen">pass</td>
         </tr>
         <tr>
            <td valign="top">&nbsp;&nbsp;&nbsp;&nbsp;<a name="#xUseCaseR31-018">UseCaseR31-018</a><a href="#xUseCaseR31-018" onmousedown="makeVisible('UseCaseR31-018');" onmouseover="makeVisible('UseCaseR31-018');" id="xUseCaseR31-018">[+]</a><font size="-1">
                  <div id="UseCaseR31-018" style="position:absolute; left:20; width:410px; visibility:hidden"><font face="verdana, arial, helvetica, sans-serif" size="2">
                        <div style="float:left; background-color:white; padding:3px; border:1px solid black"><span style="float:right; background-color:gray; color:white; font-weight:bold; width='20px'; text-align:center; cursor:pointer" onclick="makeInvisible('UseCaseR31-018')">&nbsp;X&nbsp;</span><b>UseCaseR31-018:</b><br><br><b>Spec Dependencies</b>:<br>feature = higherOrderFunctions<br>spec = XQ31+<br>spec = XQ30+<br><br><b>Test</b>: 
                           declare variable $s :=[['A', 'DT'], ['bride', 'NN'], [',', ','], ['you', 'PRP'], ['know',
                           'VBP'], [',', ','], ['must', 'MD'],
                           ['appear', 'VB'], ['like', 'IN'], ['a', 'DT'], ['bride', 'NN'], [',', ','], ['but',
                           'CC'], ['my', 'PRP$'],
                           ['natural', 'JJ'], ['taste', 'NN'], ['is', 'VBZ'], ['all', 'DT'], ['for', 'IN'], ['simplicity',
                           'NN'], [';', ':'],
                           ['a', 'DT'], ['simple', 'JJ'], ['style', 'NN'], ['of', 'IN'], ['dress', 'NN'], ['is',
                           'VBZ'],
                           ['so', 'RB'], ['infinitely', 'RB'], ['preferable', 'JJ'], ['to', 'TO'], ['finery',
                           'VB'], ['.', '.']
                           ];
                           declare function local:filter($s as item()*, $p as function(item()) as xs:boolean)
                           {
                           map {
                           true() : array { $s[$p(.)] },
                           false() : array { $s[not($p(.))] }
                           }
                           };
                           
                           
                           let $f := function($a) { starts-with($a(2), "VB") }
                           return
                           local:filter($s?*, $f)
                        </div></font></div></font></td>
            <td valign="top" bgcolor="palegreen">pass</td>
            <td valign="top" bgcolor="salmon">no result</td>
            <td valign="top" bgcolor="white">n/a
               <div align="left" width="20"><font size="1">
                     <p>test-set dependencies not satisfied</p></font></div>
            </td>
            <td valign="top" bgcolor="palegreen">pass</td>
            <td valign="top" bgcolor="white">n/a</td>
            <td valign="top" bgcolor="palegreen">pass</td>
            <td valign="top" bgcolor="palegreen">pass</td>
            <td valign="top" bgcolor="palegreen">pass</td>
         </tr>
         <tr>
            <td valign="top">&nbsp;&nbsp;&nbsp;&nbsp;<a name="#xUseCaseR31-019">UseCaseR31-019</a><a href="#xUseCaseR31-019" onmousedown="makeVisible('UseCaseR31-019');" onmouseover="makeVisible('UseCaseR31-019');" id="xUseCaseR31-019">[+]</a><font size="-1">
                  <div id="UseCaseR31-019" style="position:absolute; left:20; width:410px; visibility:hidden"><font face="verdana, arial, helvetica, sans-serif" size="2">
                        <div style="float:left; background-color:white; padding:3px; border:1px solid black"><span style="float:right; background-color:gray; color:white; font-weight:bold; width='20px'; text-align:center; cursor:pointer" onclick="makeInvisible('UseCaseR31-019')">&nbsp;X&nbsp;</span><b>UseCaseR31-019:</b><br><br><b>Spec Dependencies</b>:<br>spec = XQ30+<br><br><b>Test</b>: 
                           declare variable $span := &lt;root&gt;&lt;span class="ocr_word" title="bbox 1388 430 1461 474"&gt;the&lt;/span&gt;
                           &lt;span class="ocr_word" title="bbox 1514 433 1635 476"&gt;other&lt;/span&gt;
                           &lt;span class="ocr_word" title="bbox 133 498 317 554"&gt;pcssible&lt;/span&gt;
                           &lt;span class="ocr_word" title="bbox 354 498 590 541"&gt;derivation&lt;/span&gt;
                           &lt;span class="ocr_word" title="bbox 631 497 738 538"&gt;from&lt;/span&gt;
                           &lt;span class="ocr_word" title="bbox 772 495 799 547" lang="grc" xml:lang="grc"&gt;?&lt;/span&gt;
                           &lt;span class="ocr_word" title="bbox 835 495 1019 538" lang="grc" xml:lang="grc"&gt;???????&lt;/span&gt;
                           &lt;span class="ocr_word" title="bbox 134 567 220 607"&gt;dies&lt;/span&gt;
                           &lt;span class="ocr_word" title="bbox 257 566 462 607"&gt;erastinus&lt;/span&gt;&lt;/root&gt;;
                           
                           declare function local:extract-text($spans)
                           {
                           for $s in $spans//span return string($s)
                           };
                           
                           local:extract-text($span)
                        </div></font></div></font></td>
            <td valign="top" bgcolor="palegreen">pass</td>
            <td valign="top" bgcolor="salmon">no result</td>
            <td valign="top" bgcolor="white">n/a
               <div align="left" width="20"><font size="1">
                     <p>test-set dependencies not satisfied</p></font></div>
            </td>
            <td valign="top" bgcolor="palegreen">pass</td>
            <td valign="top" bgcolor="white">n/a</td>
            <td valign="top" bgcolor="palegreen">pass</td>
            <td valign="top" bgcolor="palegreen">pass</td>
            <td valign="top" bgcolor="palegreen">pass</td>
         </tr>
         <tr>
            <td valign="top">&nbsp;&nbsp;&nbsp;&nbsp;<a name="#xUseCaseR31-022">UseCaseR31-022</a><a href="#xUseCaseR31-022" onmousedown="makeVisible('UseCaseR31-022');" onmouseover="makeVisible('UseCaseR31-022');" id="xUseCaseR31-022">[+]</a><font size="-1">
                  <div id="UseCaseR31-022" style="position:absolute; left:20; width:410px; visibility:hidden"><font face="verdana, arial, helvetica, sans-serif" size="2">
                        <div style="float:left; background-color:white; padding:3px; border:1px solid black"><span style="float:right; background-color:gray; color:white; font-weight:bold; width='20px'; text-align:center; cursor:pointer" onclick="makeInvisible('UseCaseR31-022')">&nbsp;X&nbsp;</span><b>UseCaseR31-022:</b><br><br><b>Spec Dependencies</b>:<br>spec = XQ31+<br>spec = XQ30+<br><br><b>Test</b>: json-doc("http://www.w3.org/qt3/app/UseCaseR31/mildred-json")?phone?*[?type = 'mobile']?number
                        </div></font></div></font></td>
            <td valign="top" bgcolor="palegreen">pass</td>
            <td valign="top" bgcolor="salmon">no result</td>
            <td valign="top" bgcolor="white">n/a
               <div align="left" width="20"><font size="1">
                     <p>test-set dependencies not satisfied</p></font></div>
            </td>
            <td valign="top" bgcolor="palegreen">pass</td>
            <td valign="top" bgcolor="white">n/a</td>
            <td valign="top" bgcolor="palegreen">pass</td>
            <td valign="top" bgcolor="palegreen">pass</td>
            <td valign="top" bgcolor="palegreen">pass</td>
         </tr>
         <tr>
            <td valign="top">&nbsp;&nbsp;&nbsp;&nbsp;<a name="#xUseCaseR31-023">UseCaseR31-023</a><a href="#xUseCaseR31-023" onmousedown="makeVisible('UseCaseR31-023');" onmouseover="makeVisible('UseCaseR31-023');" id="xUseCaseR31-023">[+]</a><font size="-1">
                  <div id="UseCaseR31-023" style="position:absolute; left:20; width:410px; visibility:hidden"><font face="verdana, arial, helvetica, sans-serif" size="2">
                        <div style="float:left; background-color:white; padding:3px; border:1px solid black"><span style="float:right; background-color:gray; color:white; font-weight:bold; width='20px'; text-align:center; cursor:pointer" onclick="makeInvisible('UseCaseR31-023')">&nbsp;X&nbsp;</span><b>UseCaseR31-023:</b><br><br><b>Spec Dependencies</b>:<br>feature = higherOrderFunctions<br>spec = XQ31+<br>spec = XQ30+<br><br><b>Test</b>: 
                           declare namespace map = "http://www.w3.org/2005/xpath-functions/map";
                           declare namespace array = "http://www.w3.org/2005/xpath-functions/array";
                           
                           let $input := json-doc('http://www.w3.org/qt3/app/UseCaseR31/employees-json')
                           for $k in map:keys($input)
                           return
                           &lt;department name="{ $k }"&gt;
                           {
                           let $array := $input($k)
                           for $i in 1 to array:size($array)
                           let $emp := $array($i)
                           return
                           &lt;employee&gt;
                           &lt;firstName&gt;{ $emp('firstName') }&lt;/firstName&gt;
                           &lt;lastName&gt;{ $emp('lastName') }&lt;/lastName&gt;
                           &lt;age&gt;{ $emp('age') }&lt;/age&gt;
                           &lt;/employee&gt;
                           }
                           &lt;/department&gt;
                        </div></font></div></font></td>
            <td valign="top" bgcolor="palegreen">pass</td>
            <td valign="top" bgcolor="salmon">no result</td>
            <td valign="top" bgcolor="white">n/a
               <div align="left" width="20"><font size="1">
                     <p>test-set dependencies not satisfied</p></font></div>
            </td>
            <td valign="top" bgcolor="palegreen">pass</td>
            <td valign="top" bgcolor="white">n/a</td>
            <td valign="top" bgcolor="palegreen">pass</td>
            <td valign="top" bgcolor="palegreen">pass</td>
            <td valign="top" bgcolor="tomato">fail</td>
         </tr>
         <tr>
            <td valign="top">&nbsp;&nbsp;&nbsp;&nbsp;<a name="#xUseCaseR31-025">UseCaseR31-025</a><a href="#xUseCaseR31-025" onmousedown="makeVisible('UseCaseR31-025');" onmouseover="makeVisible('UseCaseR31-025');" id="xUseCaseR31-025">[+]</a><font size="-1">
                  <div id="UseCaseR31-025" style="position:absolute; left:20; width:410px; visibility:hidden"><font face="verdana, arial, helvetica, sans-serif" size="2">
                        <div style="float:left; background-color:white; padding:3px; border:1px solid black"><span style="float:right; background-color:gray; color:white; font-weight:bold; width='20px'; text-align:center; cursor:pointer" onclick="makeInvisible('UseCaseR31-025')">&nbsp;X&nbsp;</span><b>UseCaseR31-025:</b><br><br><b>Spec Dependencies</b>:<br>feature = higherOrderFunctions<br>spec = XQ31+<br>spec = XQ30+<br><br><b>Test</b>: declare namespace map="http://www.w3.org/2005/xpath-functions/map";
                           
                           declare function local:deep-put($input as item()*, $key as xs:string, $value as item()*)
                           as item()*
                           {
                           let $mf := function($k, $v) {
                           if ($k eq $key)
                           then map{$k : $value}
                           else map{$k : local:deep-put($v, $key, $value)}
                           }
                           for $i in $input
                           return
                           if ($i instance of map(*))
                           then map:merge(map:for-each($i, $mf))
                           else if ($i instance of array(*))
                           then array{ local:deep-put($i?*, $key, $value) }
                           else $i
                           };
                           
                           local:deep-put(json-doc("http://www.w3.org/qt3/app/UseCaseR31/bookinfo-json"), "first",
                           "John")
                        </div></font></div></font></td>
            <td valign="top" bgcolor="palegreen">pass</td>
            <td valign="top" bgcolor="salmon">no result</td>
            <td valign="top" bgcolor="white">n/a
               <div align="left" width="20"><font size="1">
                     <p>test-set dependencies not satisfied</p></font></div>
            </td>
            <td valign="top" bgcolor="palegreen">pass</td>
            <td valign="top" bgcolor="white">n/a</td>
            <td valign="top" bgcolor="palegreen">pass</td>
            <td valign="top" bgcolor="palegreen">pass</td>
            <td valign="top" bgcolor="palegreen">pass</td>
         </tr>
         <tr>
            <td valign="top">&nbsp;&nbsp;&nbsp;&nbsp;<a name="#xUseCaseR31-026">UseCaseR31-026</a><a href="#xUseCaseR31-026" onmousedown="makeVisible('UseCaseR31-026');" onmouseover="makeVisible('UseCaseR31-026');" id="xUseCaseR31-026">[+]</a><font size="-1">
                  <div id="UseCaseR31-026" style="position:absolute; left:20; width:410px; visibility:hidden"><font face="verdana, arial, helvetica, sans-serif" size="2">
                        <div style="float:left; background-color:white; padding:3px; border:1px solid black"><span style="float:right; background-color:gray; color:white; font-weight:bold; width='20px'; text-align:center; cursor:pointer" onclick="makeInvisible('UseCaseR31-026')">&nbsp;X&nbsp;</span><b>UseCaseR31-026:</b><br><br><b>Spec Dependencies</b>:<br>feature = higherOrderFunctions<br>spec = XQ31+<br>spec = XQ30+<br><br><b>Test</b>: 
                           for $sarah in collection($users-collection-uri),
                           $friend in collection($users-collection-uri)
                           where $sarah('name') = "Sarah"
                           and $friend('name') = $sarah('friends')?*
                           return $friend('name')
                           
                        </div></font></div></font></td>
            <td valign="top" bgcolor="tomato">fail</td>
            <td valign="top" bgcolor="salmon">no result</td>
            <td valign="top" bgcolor="white">n/a
               <div align="left" width="20"><font size="1">
                     <p>test-set dependencies not satisfied</p></font></div>
            </td>
            <td valign="top" bgcolor="palegreen">pass</td>
            <td valign="top" bgcolor="white">n/a</td>
            <td valign="top" bgcolor="palegreen">pass</td>
            <td valign="top" bgcolor="palegreen">pass</td>
            <td valign="top" bgcolor="tomato">fail</td>
         </tr>
         <tr>
            <td valign="top">&nbsp;&nbsp;&nbsp;&nbsp;<a name="#xUseCaseR31-027">UseCaseR31-027</a><a href="#xUseCaseR31-027" onmousedown="makeVisible('UseCaseR31-027');" onmouseover="makeVisible('UseCaseR31-027');" id="xUseCaseR31-027">[+]</a><font size="-1">
                  <div id="UseCaseR31-027" style="position:absolute; left:20; width:410px; visibility:hidden"><font face="verdana, arial, helvetica, sans-serif" size="2">
                        <div style="float:left; background-color:white; padding:3px; border:1px solid black"><span style="float:right; background-color:gray; color:white; font-weight:bold; width='20px'; text-align:center; cursor:pointer" onclick="makeInvisible('UseCaseR31-027')">&nbsp;X&nbsp;</span><b>UseCaseR31-027:</b><br><br><b>Spec Dependencies</b>:<br>feature = higherOrderFunctions<br>spec = XQ31+<br>spec = XQ30+<br><br><b>Test</b>: 
                           Q{http://www.w3.org/2005/xpath-functions/map}merge(
                           for $sales in collection($sales-collection-uri)
                           let $pname := $sales('product')
                           group by $pname
                           return map { $pname : sum(for $s in $sales return $s('quantity')) })
                        </div></font></div></font></td>
            <td valign="top" bgcolor="tomato">fail</td>
            <td valign="top" bgcolor="salmon">no result</td>
            <td valign="top" bgcolor="white">n/a
               <div align="left" width="20"><font size="1">
                     <p>test-set dependencies not satisfied</p></font></div>
            </td>
            <td valign="top" bgcolor="palegreen">pass</td>
            <td valign="top" bgcolor="white">n/a</td>
            <td valign="top" bgcolor="palegreen">pass</td>
            <td valign="top" bgcolor="palegreen">pass</td>
            <td valign="top" bgcolor="tomato">fail</td>
         </tr>
         <tr>
            <td valign="top">&nbsp;&nbsp;&nbsp;&nbsp;<a name="#xUseCaseR31-028">UseCaseR31-028</a><a href="#xUseCaseR31-028" onmousedown="makeVisible('UseCaseR31-028');" onmouseover="makeVisible('UseCaseR31-028');" id="xUseCaseR31-028">[+]</a><font size="-1">
                  <div id="UseCaseR31-028" style="position:absolute; left:20; width:410px; visibility:hidden"><font face="verdana, arial, helvetica, sans-serif" size="2">
                        <div style="float:left; background-color:white; padding:3px; border:1px solid black"><span style="float:right; background-color:gray; color:white; font-weight:bold; width='20px'; text-align:center; cursor:pointer" onclick="makeInvisible('UseCaseR31-028')">&nbsp;X&nbsp;</span><b>UseCaseR31-028:</b><br><br><b>Spec Dependencies</b>:<br>spec = XQ31+<br>spec = XQ30+<br><br><b>Test</b>: 
                           declare namespace map="http://www.w3.org/2005/xpath-functions/map";
                           declare variable $storesVar := array { unparsed-text-lines("UseCaseR31/stores.json")
                           ! parse-json(.) };
                           declare variable $productsVar := array { unparsed-text-lines("UseCaseR31/products.json")
                           ! parse-json(.) };
                           declare variable $salesVar := array { unparsed-text-lines("UseCaseR31/sales.json")
                           ! parse-json(.) };
                           array {
                           for $store in $storesVar ? *
                           let $state := $store?state
                           group by $state
                           order by $state
                           return
                           map {
                           $state :  array {
                           for $product in $productsVar ? *
                           let $category := $product?category
                           group by $category
                           order by $category
                           return
                           map {
                           $category :  map:merge((
                           for $sales in $salesVar ? *
                           where $sales?("store number") = $store?("store number") and $sales?product = $product?name
                           let $pname := $sales?product
                           group by $pname
                           return map { $pname :  sum(for $s in $sales return $s?quantity)}
                           ))
                           }
                           }
                           }
                           }
                        </div></font></div></font></td>
            <td valign="top" bgcolor="palegreen">pass</td>
            <td valign="top" bgcolor="salmon">no result</td>
            <td valign="top" bgcolor="white">n/a
               <div align="left" width="20"><font size="1">
                     <p>test-set dependencies not satisfied</p></font></div>
            </td>
            <td valign="top" bgcolor="palegreen">pass</td>
            <td valign="top" bgcolor="white">n/a</td>
            <td valign="top" bgcolor="palegreen">pass</td>
            <td valign="top" bgcolor="palegreen">pass</td>
            <td valign="top" bgcolor="tomato">fail</td>
         </tr>
         <tr>
            <td valign="top">&nbsp;&nbsp;&nbsp;&nbsp;<a name="#xUseCaseR31-029">UseCaseR31-029</a><a href="#xUseCaseR31-029" onmousedown="makeVisible('UseCaseR31-029');" onmouseover="makeVisible('UseCaseR31-029');" id="xUseCaseR31-029">[+]</a><font size="-1">
                  <div id="UseCaseR31-029" style="position:absolute; left:20; width:410px; visibility:hidden"><font face="verdana, arial, helvetica, sans-serif" size="2">
                        <div style="float:left; background-color:white; padding:3px; border:1px solid black"><span style="float:right; background-color:gray; color:white; font-weight:bold; width='20px'; text-align:center; cursor:pointer" onclick="makeInvisible('UseCaseR31-029')">&nbsp;X&nbsp;</span><b>UseCaseR31-029:</b><br><br><b>Spec Dependencies</b>:<br>feature = higherOrderFunctions<br>spec = XQ31+<br>spec = XQ30+<br><br><b>Test</b>: declare namespace map="http://www.w3.org/2005/xpath-functions/map";
                           let $sats := json-doc("http://www.w3.org/qt3/app/UseCaseR31/satellites-json")("satellites")
                           return map {
                           "visible" : array {
                           map:keys($sats)[$sats(.)("visible")]
                           },
                           "invisible" : array {
                           map:keys($sats)[not($sats(.)("visible"))]
                           }
                           }
                        </div></font></div></font></td>
            <td valign="top" bgcolor="palegreen">pass</td>
            <td valign="top" bgcolor="salmon">no result</td>
            <td valign="top" bgcolor="white">n/a
               <div align="left" width="20"><font size="1">
                     <p>test-set dependencies not satisfied</p></font></div>
            </td>
            <td valign="top" bgcolor="palegreen">pass</td>
            <td valign="top" bgcolor="white">n/a</td>
            <td valign="top" bgcolor="palegreen">pass</td>
            <td valign="top" bgcolor="palegreen">pass</td>
            <td valign="top" bgcolor="palegreen">pass</td>
         </tr>
         <tr>
            <td valign="top">&nbsp;&nbsp;&nbsp;&nbsp;<a name="#xUseCaseR31-030">UseCaseR31-030</a><a href="#xUseCaseR31-030" onmousedown="makeVisible('UseCaseR31-030');" onmouseover="makeVisible('UseCaseR31-030');" id="xUseCaseR31-030">[+]</a><font size="-1">
                  <div id="UseCaseR31-030" style="position:absolute; left:20; width:410px; visibility:hidden"><font face="verdana, arial, helvetica, sans-serif" size="2">
                        <div style="float:left; background-color:white; padding:3px; border:1px solid black"><span style="float:right; background-color:gray; color:white; font-weight:bold; width='20px'; text-align:center; cursor:pointer" onclick="makeInvisible('UseCaseR31-030')">&nbsp;X&nbsp;</span><b>UseCaseR31-030:</b><br><br><b>Spec Dependencies</b>:<br>spec = XQ31+<br>spec = XQ30+<br><br><b>Test</b>: array {
                           for $page in doc("UseCaseR31/Wikipedia-Origami.xml")//page
                           return map {
                           "title": string($page/title),
                           "id" : string($page/id),
                           "last updated" : string($page/revision[1]/timestamp),
                           "authors" : array {
                           for $a in $page/revision/contributor/username
                           return string($a)
                           }
                           }
                           }
                        </div></font></div></font></td>
            <td valign="top" bgcolor="palegreen">pass</td>
            <td valign="top" bgcolor="salmon">no result</td>
            <td valign="top" bgcolor="white">n/a
               <div align="left" width="20"><font size="1">
                     <p>test-set dependencies not satisfied</p></font></div>
            </td>
            <td valign="top" bgcolor="palegreen">pass</td>
            <td valign="top" bgcolor="white">n/a</td>
            <td valign="top" bgcolor="palegreen">pass</td>
            <td valign="top" bgcolor="palegreen">pass</td>
            <td valign="top" bgcolor="tomato">fail</td>
         </tr>
         <tr>
            <td valign="top">&nbsp;&nbsp;&nbsp;&nbsp;<a name="#xUseCaseR31-031">UseCaseR31-031</a><a href="#xUseCaseR31-031" onmousedown="makeVisible('UseCaseR31-031');" onmouseover="makeVisible('UseCaseR31-031');" id="xUseCaseR31-031">[+]</a><font size="-1">
                  <div id="UseCaseR31-031" style="position:absolute; left:20; width:410px; visibility:hidden"><font face="verdana, arial, helvetica, sans-serif" size="2">
                        <div style="float:left; background-color:white; padding:3px; border:1px solid black"><span style="float:right; background-color:gray; color:white; font-weight:bold; width='20px'; text-align:center; cursor:pointer" onclick="makeInvisible('UseCaseR31-031')">&nbsp;X&nbsp;</span><b>UseCaseR31-031:</b><br><br><b>Spec Dependencies</b>:<br>spec = XQ31+<br>spec = XQ30+<br><br><b>Test</b>: 
                           &lt;html&gt;&lt;body&gt;&lt;table&gt;
                           &lt;tr&gt; (: Column headings :)
                           {
                           &lt;th&gt; &lt;/th&gt;,
                           for $th in json-doc('http://www.w3.org/qt3/app/UseCaseR31/table-json')?col-labels?*
                           return &lt;th&gt;{ $th }&lt;/th&gt;
                           }
                           &lt;/tr&gt;
                           {  (: Data for each row :)
                           for $r at $i in json-doc('http://www.w3.org/qt3/app/UseCaseR31/table-json')?data?*
                           return
                           &lt;tr&gt;
                           {
                           &lt;th&gt;{ json-doc('http://www.w3.org/qt3/app/UseCaseR31/table-json')?row-labels[$i] }&lt;/th&gt;,
                           for $c in $r?*
                           return &lt;td&gt;{ $c }&lt;/td&gt;
                           }
                           &lt;/tr&gt;
                           }
                           &lt;/table&gt;
                           
                           &lt;/body&gt;
                           &lt;/html&gt;
                           
                        </div></font></div></font></td>
            <td valign="top" bgcolor="palegreen">pass</td>
            <td valign="top" bgcolor="salmon">no result</td>
            <td valign="top" bgcolor="white">n/a
               <div align="left" width="20"><font size="1">
                     <p>test-set dependencies not satisfied</p></font></div>
            </td>
            <td valign="top" bgcolor="palegreen">pass</td>
            <td valign="top" bgcolor="white">n/a</td>
            <td valign="top" bgcolor="palegreen">pass</td>
            <td valign="top" bgcolor="palegreen">pass</td>
            <td valign="top" bgcolor="palegreen">pass</td>
         </tr>
         <tr>
            <td valign="top">&nbsp;&nbsp;&nbsp;&nbsp;<a name="#xUseCaseR31-032">UseCaseR31-032</a><a href="#xUseCaseR31-032" onmousedown="makeVisible('UseCaseR31-032');" onmouseover="makeVisible('UseCaseR31-032');" id="xUseCaseR31-032">[+]</a><font size="-1">
                  <div id="UseCaseR31-032" style="position:absolute; left:20; width:410px; visibility:hidden"><font face="verdana, arial, helvetica, sans-serif" size="2">
                        <div style="float:left; background-color:white; padding:3px; border:1px solid black"><span style="float:right; background-color:gray; color:white; font-weight:bold; width='20px'; text-align:center; cursor:pointer" onclick="makeInvisible('UseCaseR31-032')">&nbsp;X&nbsp;</span><b>UseCaseR31-032:</b><br><br><b>Spec Dependencies</b>:<br>spec = XQ31+<br>spec = XQ30+<br><br><b>Test</b>: 
                           &lt;table&gt;{
                           for tumbling window $w in json-doc("http://www.w3.org/qt3/app/UseCaseR31/colors-json")?colors?*
                           start at $x when fn:true()
                           end at $y when $y - $x = 2
                           return
                           &lt;tr&gt;{
                           for $i in $w?color
                           return
                           &lt;td&gt;{ $i }&lt;/td&gt;
                           }&lt;/tr&gt;
                           }&lt;/table&gt;
                           
                        </div></font></div></font></td>
            <td valign="top" bgcolor="palegreen">pass</td>
            <td valign="top" bgcolor="salmon">no result</td>
            <td valign="top" bgcolor="white">n/a
               <div align="left" width="20"><font size="1">
                     <p>test-set dependencies not satisfied</p></font></div>
            </td>
            <td valign="top" bgcolor="palegreen">pass</td>
            <td valign="top" bgcolor="white">n/a</td>
            <td valign="top" bgcolor="palegreen">pass</td>
            <td valign="top" bgcolor="palegreen">pass</td>
            <td valign="top" bgcolor="palegreen">pass</td>
         </tr>
         <tr>
            <td valign="top">&nbsp;&nbsp;&nbsp;&nbsp;<a name="#xUseCaseR31-033">UseCaseR31-033</a><a href="#xUseCaseR31-033" onmousedown="makeVisible('UseCaseR31-033');" onmouseover="makeVisible('UseCaseR31-033');" id="xUseCaseR31-033">[+]</a><font size="-1">
                  <div id="UseCaseR31-033" style="position:absolute; left:20; width:410px; visibility:hidden"><font face="verdana, arial, helvetica, sans-serif" size="2">
                        <div style="float:left; background-color:white; padding:3px; border:1px solid black"><span style="float:right; background-color:gray; color:white; font-weight:bold; width='20px'; text-align:center; cursor:pointer" onclick="makeInvisible('UseCaseR31-033')">&nbsp;X&nbsp;</span><b>UseCaseR31-033:</b><br><br><b>Spec Dependencies</b>:<br>feature = higherOrderFunctions<br>spec = XQ31+<br>spec = XQ30+<br><br><b>Test</b>: 
                           declare namespace map="http://www.w3.org/2005/xpath-functions/map";
                           let $dbj := json-doc("http://www.w3.org/qt3/app/UseCaseR31/users2-json")[ .("name")
                           = "Deadbeat Jim" ]
                           return map:put($dbj, "status", "credit card declined")
                           
                        </div></font></div></font></td>
            <td valign="top" bgcolor="palegreen">pass</td>
            <td valign="top" bgcolor="salmon">no result</td>
            <td valign="top" bgcolor="white">n/a
               <div align="left" width="20"><font size="1">
                     <p>test-set dependencies not satisfied</p></font></div>
            </td>
            <td valign="top" bgcolor="palegreen">pass</td>
            <td valign="top" bgcolor="white">n/a</td>
            <td valign="top" bgcolor="palegreen">pass</td>
            <td valign="top" bgcolor="palegreen">pass</td>
            <td valign="top" bgcolor="palegreen">pass</td>
         </tr>
         <tr>
            <td valign="top">&nbsp;&nbsp;&nbsp;&nbsp;<a name="#xUseCaseR31-034-err">UseCaseR31-034-err</a><a href="#xUseCaseR31-034-err" onmousedown="makeVisible('UseCaseR31-034-err');" onmouseover="makeVisible('UseCaseR31-034-err');" id="xUseCaseR31-034-err">[+]</a><font size="-1">
                  <div id="UseCaseR31-034-err" style="position:absolute; left:20; width:410px; visibility:hidden"><font face="verdana, arial, helvetica, sans-serif" size="2">
                        <div style="float:left; background-color:white; padding:3px; border:1px solid black"><span style="float:right; background-color:gray; color:white; font-weight:bold; width='20px'; text-align:center; cursor:pointer" onclick="makeInvisible('UseCaseR31-034-err')">&nbsp;X&nbsp;</span><b>UseCaseR31-034-err:</b><br><br><b>Spec Dependencies</b>:<br>feature = higherOrderFunctions<br>spec = XQ31+<br>spec = XQ30+<br><br><b>Test</b>: 
                           let $mf := function($k as node(), $v) {
                           map{$k('book') : $v}
                           
                           }
                           
                           return $mf(json-doc("http://www.w3.org/qt3/app/UseCaseR31/bookinfo-json"), "first")
                        </div></font></div></font></td>
            <td valign="top" bgcolor="palegreen">pass</td>
            <td valign="top" bgcolor="salmon">no result</td>
            <td valign="top" bgcolor="white">n/a
               <div align="left" width="20"><font size="1">
                     <p>test-set dependencies not satisfied</p></font></div>
            </td>
            <td valign="top" bgcolor="palegreen">pass</td>
            <td valign="top" bgcolor="white">n/a</td>
            <td valign="top" bgcolor="palegreen">pass</td>
            <td valign="top" bgcolor="palegreen">pass</td>
            <td valign="top" bgcolor="palegreen">pass</td>
         </tr>
      </table>
   </body>
</html>