<html xmlns:t="http://www.w3.org/2010/09/qt-fots-catalog" xmlns:r="http://www.w3.org/2012/08/qt-fots-results" xmlns:xs="http://www.w3.org/2001/XMLSchema">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><script language="JavaScript" type="text/javascript">
         function doMenu(item) {
         obj=document.getElementById(item);
         col=document.getElementById("x" + item);
         if (obj.style.display=="none") { obj.style.display="block"; col.innerHTML="[-]"; }
         else { obj.style.display="none"; col.innerHTML="[+]"; } }
      </script><script language="JavaScript" type="text/javascript">
          (document.getElementById) ? domNode = true: domNode = false;
          var current = null;
          
          function makeVisible(item) {
               if(current != null) {
                  makeInvisible(current);
              }
              if (domNode) {
                  document.getElementById(item).style.visibility = 'visible';
                  current = item;
                  
              }
          }
          
          function makeInvisible(item) {
              if (domNode) {
                  document.getElementById(item).style.visibility = 'hidden';
                  current = item;
              }
          }
      </script></head>
   <body><button type="button" onclick="window.location='../report.html'">Back to Main Report</button><table border="0" width="100%">
         <tr>
            <td>
               <table align="right">
                  <tr>
                     <td>Legend:&nbsp;&nbsp;&nbsp;&nbsp;</td>
                     <td>
                        <table frame="border">
                           <tr>
                              <td bgcolor="mediumseagreen">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
                           </tr>
                        </table>
                     </td>
                     <td>passed</td>
                     <td>&nbsp;&nbsp;&nbsp;&nbsp;</td>
                     <td>
                        <table frame="border">
                           <tr>
                              <td bgcolor="palegreen">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
                           </tr>
                        </table>
                     </td>
                     <td>almost passed<br>(â‰¥ 98%)
                     </td>
                     <td>&nbsp;&nbsp;&nbsp;&nbsp;</td>
                     <td>
                        <table frame="border">
                           <tr>
                              <td bgcolor="coral">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
                           </tr>
                        </table>
                     </td>
                     <td>failed</td>
                     <td>&nbsp;&nbsp;&nbsp;&nbsp;</td>
                     <td>
                        <table frame="border">
                           <tr>
                              <td bgcolor="white">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
                           </tr>
                        </table>
                     </td>
                     <td>untested</td>
                  </tr>
               </table>
            </td>
         </tr>
      </table>
      <table frame="hsides" rules="groups" border="1" bordercolor="black" bgcolor="lightcyan" cellpadding="2">
         <thead>
            <tr>
               <td></td>
               <td colspan="4" style="text-align:center"><b>Implementations</b></td>
            </tr>
            <tr>
               <th>Tests</th>
               <th valign="top"><a href="../results_BaseX_8.4 beta_d2.html">BaseX 8.4 beta</a><br>XQ31<br><font size="-1">(QT3 vCVS)</font></th>
               <th valign="top"><a href="../results_Saxon-EE_9.7.0.1_d4.html">Saxon-EE 9.7.0.1</a><br>XP31
               </th>
               <th valign="top"><a href="../results_Saxon-EE_9.7.0.1_d5.html">Saxon-EE 9.7.0.1</a><br>XQ31
               </th>
               <th valign="top"><a href="../results_anonymous_r3251812_d3.html">anonymous r3251812</a><br>XQ31<br><font size="-1">(QT3 vCVS)</font></th>
            </tr>
         </thead>
         <tr>
            <td valign="top">app-Demos</td>
            <td align="center" bgcolor="coral">3/4</td>
            <td align="center" bgcolor="white">0/0</td>
            <td align="center" bgcolor="mediumseagreen">4/4</td>
            <td align="center" bgcolor="coral">3/4</td>
            <td align="center" bgcolor="">0/4</td>
         </tr>
         <tr>
            <td valign="top">&nbsp;&nbsp;&nbsp;&nbsp;<a name="#xsudoku">sudoku</a><a href="#xsudoku" onmousedown="makeVisible('sudoku');" onmouseover="makeVisible('sudoku');" id="xsudoku">[+]</a><font size="-1">
                  <div id="sudoku" style="position:absolute; left:20; width:410px; height:10; visibility:hidden"><font face="verdana, arial, helvetica, sans-serif" size="2">
                        <div style="float:left; background-color:white; padding:3px; border:1px solid black"><span style="float:right; background-color:gray; color:white; font-weight:bold; width='20px'; text-align:center; cursor:pointer" onclick="makeInvisible('sudoku')">&nbsp;X&nbsp;</span><b>sudoku:</b><br><br>
                           declare namespace fn = "sudoku";
                           declare variable $board as xs:integer+ := 
                           	( 1,0,0, 3,0,0, 6,0,0, 0,2,0, 5,0,0, 0,0,4, 0,0,9, 0,0,0, 
                           	5,2,0, 0,0,0, 9,6,3, 0,0,0, 7,1,6, 0,0,0, 0,0,0, 0,0,0, 
                           	0,8,0, 0,4,0, 9,0,0, 0,0,5, 3,0,7, 8,0,0, 4,0,6, 0,0,0, 
                           	3,5,0, 0,0,0, 0,0,1);
                           declare variable $rowStarts as xs:integer+ := (1, 10, 19, 28, 37, 46, 55, 64,73);
                           declare variable $groups as xs:integer+ := 
                           	( 1,1,1, 2,2,2, 3,3,3, 1,1,1, 2,2,2, 3,3,3, 1,1,1, 2,2,2, 3,3,3, 4,4,4, 
                           	5,5,5, 6,6,6, 4,4,4, 5,5,5, 6,6,6, 4,4,4, 5,5,5, 6,6,6, 7,7,7, 8,8,8, 
                           	9,9,9, 7,7,7, 8,8,8, 9,9,9, 7,7,7, 8,8,8, 9,9,9 );
                           declare function fn:getRow ($board as xs:integer+, $index as xs:integer) as xs:integer+
                           { 
                           	let $rowStart := floor(($index - 1) div 9) * 9 
                           	return one-or-more($board[position() &gt; $rowStart and position() &lt;= $rowStart + 9])
                           
                           };
                           declare function fn:getCol ($board as xs:integer+, $index as xs:integer) as xs:integer+
                           { 
                           	let $gap := ($index - 1) mod 9, 
                           	    $colIndexes := for $x in $rowStarts 
                           	    		       return $x + $gap 
                           	return one-or-more($board[position() = $colIndexes]) 
                           };
                           declare function fn:getGroup ($board as xs:integer+, $index as xs:integer) as xs:integer+
                           { 
                           	let $group := $groups[$index] 
                           	return one-or-more($board[for $x in position() return $groups[$x]= $group]) 
                           };
                           declare function fn:getAllowedValues ($board as xs:integer+, $index as xs:integer)
                           as xs:integer* { 
                           	let $existingValues := (fn:getRow($board, $index), fn:getCol($board, $index), fn:getGroup($board,
                           $index)) 
                           	return for $x in (1 to 9) return if (not($x = $existingValues)) then $x else () 
                           };
                           declare function fn:tryValues($board as xs:integer+, $emptyCells as xs:integer+, $possibleValues
                           as xs:integer+) as xs:integer* { 
                           	let $index as xs:integer := $emptyCells[1], 
                           	    $newBoard as xs:integer+ := ($board[position() &lt;$index], $possibleValues[1],
                           $board[position() &gt; $index]), 
                           	    $result as xs:integer* := fn:populateValues($newBoard, $emptyCells[position()
                           != 1]) 
                           	return if (empty($result)) then if (count($possibleValues) &gt; 1) then fn:tryValues($board,
                           $emptyCells, one-or-more($possibleValues[position() != 1])) else () else $result 
                           };
                           declare function fn:populateValues($board as xs:integer+, $emptyCells as xs:integer*)
                           as xs:integer*{ 
                           	if (not(empty($emptyCells))) 
                           	then let $index as xs:integer := exactly-one($emptyCells[1]), 
                           			 $possibleValues as xs:integer* := distinct-values(fn:getAllowedValues($board,
                           $index)) 
                           		 return if (count($possibleValues) &gt; 1) 
                           		        then fn:tryValues($board, one-or-more($emptyCells), one-or-more($possibleValues))
                           
                           		        else if (count($possibleValues) = 1) 
                           		        then let $newBoard as xs:integer+ :=($board[position() &lt; $index], 
                           		                   exactly-one($possibleValues[1]), $board[position() &gt; $index])
                           
                           		             return fn:populateValues($newBoard, $emptyCells[position() != 1]) 
                           		        else () 
                           	else $board 
                           };
                           declare function fn:solveSudoku ($startBoard as xs:integer+) as xs:integer+{ 
                           	let $emptyCells as xs:integer* :=
                           			for $x in (1 to 81) 
                           			return if ($startBoard[$x] = 0) then $x else (), 
                           		$endBoard as xs:integer* :=fn:populateValues($startBoard,$emptyCells) 
                           	return if (empty($endBoard)) then $startBoard else one-or-more($endBoard)
                           };
                           declare function fn:drawResult ($board as xs:integer+) as element(){ 
                           	&lt;html&gt;&lt;head&gt;&lt;title&gt;Sudoku - XSLT&lt;/title&gt;&lt;style&gt;table {{ border-collapse: collapse;
                           border: 1px solid black; }} td {{ padding: 10px; }} .norm {{ border-left: 1px solid
                           #CCC; border-top: 1px solid #CCC; }} .csep {{ border-left: 1px solid black; }} .rsep
                           {{ border-top: 1px solid black; }}&lt;/style&gt;&lt;/head&gt;&lt;body&gt;{fn:drawBoard($board)}&lt;/body&gt;&lt;/html&gt;
                           };
                           declare function fn:drawBoard ($board as xs:integer+) as element(){ 
                           	&lt;table&gt;{for $i in 1 to 9 return 
                           		&lt;tr&gt;{for $j at $p in 1 to 9 
                           			  let $pos := (($i - 1) * 9) + $j 
                           			  return &lt;td class="{if ($p mod 3 = 1) then 'csep' else ('norm')} {if ($i mod 3
                           = 1) then 'rsep' else ('norm')}"&gt; {$board[$pos]}&lt;/td&gt; 
                           			  }&lt;/tr&gt; }&lt;/table&gt; 
                           };
                           fn:drawResult(fn:solveSudoku($board))
                           
                        </div></font></div></font></td>
            <td valign="top" bgcolor="palegreen">pass</td>
            <td valign="top" bgcolor="white">n/a
               <div align="left" width="20"><font size="1">
                     <p>notXP31</p></font></div>
            </td>
            <td valign="top" bgcolor="palegreen">pass</td>
            <td valign="top" bgcolor="palegreen">pass</td>
         </tr>
         <tr>
            <td valign="top">&nbsp;&nbsp;&nbsp;&nbsp;<a name="#xcurrencysvg">currencysvg</a><a href="#xcurrencysvg" onmousedown="makeVisible('currencysvg');" onmouseover="makeVisible('currencysvg');" id="xcurrencysvg">[+]</a><font size="-1">
                  <div id="currencysvg" style="position:absolute; left:20; width:410px; height:10; visibility:hidden"><font face="verdana, arial, helvetica, sans-serif" size="2">
                        <div style="float:left; background-color:white; padding:3px; border:1px solid black"><span style="float:right; background-color:gray; color:white; font-weight:bold; width='20px'; text-align:center; cursor:pointer" onclick="makeInvisible('currencysvg')">&nbsp;X&nbsp;</span><b>currencysvg:</b><br><br></div></font></div></font></td>
            <td valign="top" bgcolor="palegreen">pass</td>
            <td valign="top" bgcolor="white">n/a
               <div align="left" width="20"><font size="1">
                     <p>environment dependencies not satisfied</p></font></div>
            </td>
            <td valign="top" bgcolor="palegreen">pass</td>
            <td valign="top" bgcolor="palegreen">pass</td>
         </tr>
         <tr>
            <td valign="top">&nbsp;&nbsp;&nbsp;&nbsp;<a name="#xitunes">itunes</a><a href="#xitunes" onmousedown="makeVisible('itunes');" onmouseover="makeVisible('itunes');" id="xitunes">[+]</a><font size="-1">
                  <div id="itunes" style="position:absolute; left:20; width:410px; height:10; visibility:hidden"><font face="verdana, arial, helvetica, sans-serif" size="2">
                        <div style="float:left; background-color:white; padding:3px; border:1px solid black"><span style="float:right; background-color:gray; color:white; font-weight:bold; width='20px'; text-align:center; cursor:pointer" onclick="makeInvisible('itunes')">&nbsp;X&nbsp;</span><b>itunes:</b><br><br></div></font></div></font></td>
            <td valign="top" bgcolor="salmon">no result</td>
            <td valign="top" bgcolor="white">n/a
               <div align="left" width="20"><font size="1">
                     <p>environment dependencies not satisfied</p></font></div>
            </td>
            <td valign="top" bgcolor="palegreen">pass</td>
            <td valign="top" bgcolor="tomato">fail</td>
         </tr>
         <tr>
            <td valign="top">&nbsp;&nbsp;&nbsp;&nbsp;<a name="#xraytracer">raytracer</a><a href="#xraytracer" onmousedown="makeVisible('raytracer');" onmouseover="makeVisible('raytracer');" id="xraytracer">[+]</a><font size="-1">
                  <div id="raytracer" style="position:absolute; left:20; width:410px; height:10; visibility:hidden"><font face="verdana, arial, helvetica, sans-serif" size="2">
                        <div style="float:left; background-color:white; padding:3px; border:1px solid black"><span style="float:right; background-color:gray; color:white; font-weight:bold; width='20px'; text-align:center; cursor:pointer" onclick="makeInvisible('raytracer')">&nbsp;X&nbsp;</span><b>raytracer:</b><br><br>
                           import module namespace raytracer="http://www.xqsharp.com/raytracer";
                           import module namespace scene="http://www.xqsharp.com/raytracer/scene";
                           declare variable $width := 64;
                           declare variable $height := 64;
                           declare variable $input-context := .;
                           declare variable $scene := scene:prepare-scene($input-context/scene);
                           string-join( ( "P3", string-join((string($width), string($height)), " "), "255", (:
                           : Now the pixel data. We take each pixel in the image, and recenter it, so that the
                           : y co-ordinate ($y-recentered) ranges from -0.5 at the bottom of the image, to 0.5
                           : at the top of the image. : : The aspect ratio is used to "stretch" the range of
                           x-coordinate values to stop the : image from being skewed. :) 
                           let $aspect-ratio := $width div $height 
                           for $y in 1 to $height 
                           let $y-recentered := ((-$y div $height) + 0.5) 
                           for $x in 1 to $width 
                           let $x-recentered := (($x div $width) - 0.5) * $aspect-ratio 
                           return (: plot-pixel returns us the rgb values of the color of this pixel. 
                           		  We convert these to an integer value in the range [0, 255], and output them. :)
                           
                           	string-join( for $channel in raytracer:plot-pixel($scene, $x-recentered, $y-recentered)
                           
                           			     return string(floor($channel * 255)), " ") ), "&amp;#xA;" )
                           
                        </div></font></div></font></td>
            <td valign="top" bgcolor="palegreen">pass</td>
            <td valign="top" bgcolor="white">n/a
               <div align="left" width="20"><font size="1">
                     <p>environment dependencies not satisfied</p></font></div>
            </td>
            <td valign="top" bgcolor="palegreen">pass</td>
            <td valign="top" bgcolor="palegreen">pass</td>
         </tr>
      </table>
   </body>
</html>