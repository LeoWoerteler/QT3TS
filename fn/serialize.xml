<?xml version="1.0" encoding="UTF-8"?>
<test-set xmlns="http://www.w3.org/2010/09/qt-fots-catalog" name="fn-serialize">
    <description>Tests for the fn:serialize() function introduced in XPath 3.0</description>
    <link type="spec" document="http://www.w3.org/TR/xpath-functions-30/" idref="func-serialize-xml"/>
    <dependency type="spec" value="XP30+ XQ30+"/>

    <test-case name="serialize-xml-001">
        <description>serialize test</description>
        <created by="ONeil Delpratt, Saxonica" on="2010-10-05"/>
        <environment name="empty"/>
        <test>serialize(doc('../docs/atomic.xml'))</test>
        <result>
            <assert>contains($result,'atomic')</assert>
        </result>
    </test-case>
    <test-case name="serialize-xml-002">
        <description>serialize test - with invalid attribute node</description>
        <created by="ONeil Delpratt, Saxonica" on="2010-10-05"/>
        <environment name="empty"/>
        <test>serialize((doc('../docs/atomic.xml')//@*)[1])</test>
        <result>
            <error code="SENR0001"/>
        </result>
    </test-case>
    <test-case name="serialize-xml-003">
        <description>serialize test - with list of params as nodes</description>
        <created by="ONeil Delpratt, Saxonica" on="2010-10-05"/>
        <environment name="empty"/>
        <test>serialize(doc('../docs/atomic.xml'),
            doc('serialize/serialize-003.xml')/params/*)</test>
        <result>
            <assert>contains($result,'atomic')</assert>
        </result>
    </test-case>
    <test-case name="serialize-xml-004">
        <description>serialize test - with list of properties, but no Method set</description>
        <created by="ONeil Delpratt, Saxonica" on="2010-10-05"/>
        <environment name="empty"/>
        <test>serialize(doc('../docs/atomic.xml'),
            doc('serialize/serialize-004.xml')/params/*)</test>
        <result>
            <assert>contains($result,'atomic')</assert>
        </result>
    </test-case>
    <test-case name="serialize-xml-005">
        <description>serialize test: Error - specified the use-character-map property</description>
        <created by="ONeil Delpratt, Saxonica" on="2010-10-05"/>
        <environment name="empty"/>
        <test>serialize(doc('../docs/atomic.xml'),
            doc('serialize/serialize-005.xml')/params/*)</test>
        <result>
            <error code="SEPM0016"/>
        </result>
    </test-case>
    <test-case name="serialize-xml-006">
        <description>serialize test: specified the cdata-section-element property, space separated
            QNames</description>
        <created by="ONeil Delpratt, Saxonica" on="2010-10-06"/>
        <environment name="empty"/>
        <test>serialize(doc('../docs/atomic.xml'),
            doc('serialize/serialize-006.xml')/params/*)</test>
        <result>
            <assert>contains($result,'atomic')</assert>
        </result>
    </test-case>
    <test-case name="serialize-xml-007">
        <description>serialize test: list of properties, but one is an unrecognized name (no error,
            it is ignored)</description>
        <created by="ONeil Delpratt, Saxonica" on="2010-10-06"/>
        <environment name="empty"/>
        <test>serialize(doc('../docs/atomic.xml'),
            doc('serialize/serialize-007.xml')/params/*)</test>
        <result>
            <assert>contains($result,'atomic')</assert>
        </result>
    </test-case>
    <test-case name="serialize-xml-008">
        <description>serialize test: New suppress-indentation parameter</description>
        <created by="Michael Kay, Saxonica" on="2010-10-07"/>
        <environment name="empty"/>
        <test>serialize(doc('serialize/serialize-008-src.xml'),
            doc('serialize/serialize-008-params.xml')/params/*)</test>
        <result>
            <all-of>
                <assert>matches($result,'\n\s+&lt;title>')</assert>
                <assert>matches($result,'\n\s+&lt;p>')</assert>
                <assert>not(matches($result,'\n\s+&lt;code>'))</assert>
            </all-of>
        </result>
    </test-case>
    <test-case name="serialize-xml-009">
        <description>serialize test: Error - bad value for indent parameter</description>
        <created by="Michael Kay, Saxonica" on="2010-10-05"/>
        <environment name="empty"/>
        <test>serialize(doc('../docs/atomic.xml'),
            doc('serialize/serialize-009.xml')/params/*)</test>
        <result>
            <error code="SEPM0016"/>
        </result>
    </test-case>
</test-set>